<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediCare+ - Modern Healthcare Dashboard</title>
    
    <!-- Modern Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Enhanced Icon Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tabler-icons@latest/icons-sprite.svg">
    
    <!-- Advanced Charting and Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.44.0/dist/apexcharts.min.js"></script>
    
    <!-- Backend Integration -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Modern Animations -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Dashboard Database Connector -->
    <script src="../js/dashboard-db-connector.js"></script>
    
    <style>
        :root {
            /* Modern Color Palette */
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --accent: #f59e0b;
            --purple: #8b5cf6;
            --pink: #ec4899;
            
            /* Neutral Colors */
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            /* Semantic Colors */
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            
            /* Background & Surface */
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-tertiary: #f3f4f6;
            --surface: #ffffff;
            --surface-hover: #f8fafc;
            
            /* Text Colors */
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --text-tertiary: #9ca3af;
            --text-inverse: #ffffff;
            
            /* Borders & Dividers */
            --border: #e5e7eb;
            --border-light: #f3f4f6;
            --divider: #e5e7eb;
            
            /* Shadows */
            --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            --shadow-glow: 0 0 0 1px rgba(59, 130, 246, 0.1), 0 4px 16px rgba(59, 130, 246, 0.12);
            
            /* Border Radius */
            --radius-xs: 4px;
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 20px;
            --radius-full: 9999px;
            
            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            
            /* Typography */
            --font-primary: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-secondary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            
            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-normal: 200ms ease;
            --transition-slow: 300ms ease;
            
            /* Z-index */
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal-backdrop: 1040;
            --z-modal: 1050;
            --z-popover: 1060;
            --z-tooltip: 1070;
            --z-toast: 1080;
        }

        /* Dark Theme */
        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --surface: #1e293b;
            --surface-hover: #334155;
            
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-tertiary: #94a3b8;
            
            --border: #334155;
            --border-light: #475569;
            --divider: #334155;
            
            --gray-50: #0f172a;
            --gray-100: #1e293b;
            --gray-200: #334155;
            --gray-300: #475569;
        }

        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            height: 100%;
        }

        body {
            font-family: var(--font-primary);
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.6;
            transition: background-color var(--transition-normal), color var(--transition-normal);
            overflow-x: hidden;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gray-100);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: var(--radius-full);
            transition: background-color var(--transition-normal);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray-400);
        }

        /* Focus Styles */
        *:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* Selection */
        ::selection {
            background: var(--primary);
            color: var(--text-inverse);
        }

        /* Modern Dashboard Layout */
        .dashboard-container {
            min-height: 100vh;
            display: flex;
            background: var(--bg-secondary);
        }

        /* Modern Sidebar */
        .sidebar {
            width: 280px;
            background: var(--surface);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            z-index: var(--z-fixed);
            transition: transform var(--transition-normal);
            box-shadow: var(--shadow-lg);
        }

        .sidebar.collapsed {
            width: 72px;
        }

        .sidebar-header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 80px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            font-size: 20px;
            font-weight: 800;
            color: var(--primary);
            text-decoration: none;
            transition: all var(--transition-normal);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-inverse);
            font-size: 20px;
            box-shadow: var(--shadow-md);
        }

        .logo-text {
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sidebar-toggle {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--gray-100);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all var(--transition-normal);
        }

        .sidebar-toggle:hover {
            background: var(--gray-200);
            color: var(--text-primary);
        }

        /* Sidebar Navigation */
        .sidebar-nav {
            flex: 1;
            padding: var(--space-4);
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: var(--space-6);
        }

        .nav-section-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-tertiary);
            margin-bottom: var(--space-3);
            padding: 0 var(--space-3);
        }

        .nav-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-item {
            margin-bottom: var(--space-1);
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3) var(--space-3);
            border-radius: var(--radius-lg);
            text-decoration: none;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            opacity: 0;
            transition: opacity var(--transition-normal);
            border-radius: var(--radius-lg);
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: var(--surface-hover);
            transform: translateX(4px);
        }

        .nav-link.active {
            color: var(--text-inverse);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            box-shadow: var(--shadow-glow);
        }

        .nav-link.active::before {
            opacity: 1;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .nav-text {
            position: relative;
            z-index: 1;
            white-space: nowrap;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--error);
            color: var(--text-inverse);
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: var(--radius-full);
            min-width: 18px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .nav-badge.success {
            background: var(--success);
        }

        .nav-badge.warning {
            background: var(--warning);
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            margin-left: 280px;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            transition: margin-left var(--transition-normal);
        }

        .main-content.sidebar-collapsed {
            margin-left: 72px;
        }

        /* Top Header */
        .dashboard-header {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: var(--space-4) var(--space-6);
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 80px;
            position: sticky;
            top: 0;
            z-index: var(--z-sticky);
            backdrop-filter: blur(8px);
            box-shadow: var(--shadow-sm);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .header-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .header-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: var(--space-2);
            align-items: center;
        }

        .quick-action-btn {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-4);
            background: var(--gray-100);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            transition: all var(--transition-normal);
            cursor: pointer;
            white-space: nowrap;
        }

        .quick-action-btn:hover {
            background: var(--primary);
            color: var(--text-inverse);
            border-color: var(--primary);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .quick-action-btn.primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--text-inverse);
            border-color: var(--primary);
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { 
                box-shadow: var(--shadow-md);
            }
            50% { 
                box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2), var(--shadow-lg);
            }
        }

        /* Theme Toggle */
        .theme-toggle {
            width: 40px;
            height: 40px;
            border: none;
            background: var(--gray-100);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .theme-toggle:hover {
            background: var(--gray-200);
            color: var(--text-primary);
            transform: scale(1.05);
        }

        /* User Profile */
        .user-profile {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-2);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .user-profile:hover {
            background: var(--surface-hover);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--primary), var(--purple));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-inverse);
            font-weight: 600;
            font-size: 16px;
            box-shadow: var(--shadow-md);
        }

        .user-info {
            display: flex;
            flex-direction: column;
            text-align: left;
        }

        .user-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .user-role {
            font-size: 12px;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Enhanced Modal System */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
        }

        .modal-content {
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-glow);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            padding: 20px 24px 16px;
            border-bottom: 1px solid var(--soft-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            line-height: 1;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--text-primary);
        }

        .modal-body {
            padding: 20px 24px 24px;
        }

        /* Modal Content Styles */
        .appointment-item, .medication-item, .report-item {
            padding: 16px;
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
            margin-bottom: 12px;
            background: var(--ash-gray);
        }

        .appointment-time, .med-name, .report-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .appointment-doctor, .med-schedule, .report-date {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 8px;
        }

        .appointment-actions, .med-adherence, .report-status {
            margin-top: 8px;
        }

        .btn-sm {
            padding: 4px 8px;
            font-size: 11px;
            border-radius: 6px;
            margin-right: 6px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: var(--white);
            border: none;
        }

        .btn-secondary {
            background: var(--ash-gray);
            color: var(--text-primary);
            border: 1px solid var(--soft-gray);
        }

        .btn-danger {
            background: #EF4444;
            color: var(--white);
            border: none;
        }

        .vital-reading {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .vital-status.normal {
            color: #10B981;
            font-weight: 500;
        }

        .vital-status.positive {
            color: #10B981;
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Reminder System Styles */
        .reminders-section {
            max-width: 700px;
        }

        .reminder-categories {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .category-btn {
            padding: 8px 16px;
            background: var(--ash-gray);
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
        }

        .category-btn:hover {
            background: var(--primary-blue);
            color: var(--white);
        }

        .category-btn.active {
            background: var(--primary-blue);
            color: var(--white);
            box-shadow: var(--shadow-soft);
        }

        .reminder-content {
            min-height: 400px;
        }

        .add-reminder-section {
            background: var(--ash-gray);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .current-reminders {
            margin-top: 20px;
        }

        .reminder-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: var(--ash-gray);
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .reminder-info strong {
            color: var(--text-primary);
            font-size: 14px;
        }

        .reminder-info p {
            color: var(--text-secondary);
            font-size: 12px;
            margin: 4px 0;
        }

        .reminder-info small {
            color: var(--success);
            font-size: 11px;
        }

        .reminder-actions {
            display: flex;
            gap: 8px;
        }

        /* AI Goal Recommendations */
        .ai-goal-recommendations {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .goal-recommendation {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
        }

        .goal-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 16px;
        }

        .goal-details h5 {
            margin: 0 0 4px 0;
            color: var(--text-primary);
            font-size: 14px;
        }

        .goal-details p {
            margin: 0 0 8px 0;
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* Diet Plans */
        .diet-plans {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .diet-plan-card {
            padding: 20px;
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
        }

        .plan-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .plan-header h5 {
            margin: 0;
            color: var(--text-primary);
            font-size: 14px;
        }

        .plan-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .plan-badge.recommended {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            color: var(--white);
        }

        .plan-badge:not(.recommended) {
            background: var(--ash-gray);
            color: var(--text-secondary);
        }

        .plan-details {
            margin-bottom: 16px;
        }

        .plan-details p {
            margin: 4px 0;
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* Weight Management */
        .weight-management-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .weight-option {
            display: flex;
            gap: 16px;
            padding: 20px;
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
        }

        .option-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 20px;
        }

        .option-icon.loss {
            background: linear-gradient(135deg, #EF4444, #DC2626);
        }

        .option-icon.gain {
            background: linear-gradient(135deg, #10B981, #059669);
        }

        .option-content h5 {
            margin: 0 0 8px 0;
            color: var(--text-primary);
            font-size: 16px;
        }

        .option-content p {
            margin: 0 0 12px 0;
            color: var(--text-secondary);
            font-size: 12px;
        }

        .plan-features {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 16px;
        }

        .plan-features span {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Responsive Design for Mobile */
        @media (max-width: 768px) {
            .nav-menu {
                flex-wrap: wrap;
            }
            
            .nav-link {
                font-size: 11px;
                padding: 6px 8px;
            }
            
            .quick-nav-actions {
                gap: 4px;
            }
            
            .quick-action-btn {
                padding: 6px 8px;
                font-size: 11px;
            }
            
            .main-content {
                padding: 16px;
            }
            
            .welcome-header {
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }
            
            .date-time-info {
                text-align: center;
            }
        }

        /* Mobile Phone Optimization (480px and below) */
        @media (max-width: 480px) {
            .main-content {
                padding: 12px;
            }

            .welcome-header {
                padding: 16px;
                margin-bottom: 16px;
            }

            .welcome-content h2 {
                font-size: 18px;
            }

            .welcome-content p {
                font-size: 13px;
            }

            .current-date {
                font-size: 14px;
            }

            .current-time {
                font-size: 12px;
                padding: 2px 8px;
            }

            .user-profile {
                padding: 6px 8px;
                gap: 8px;
            }

            .user-avatar {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }

            .nav-link {
                font-size: 10px;
                padding: 4px 6px;
            }

            .quick-action-btn {
                padding: 4px 6px;
                font-size: 10px;
                min-height: 32px;
            }

            .notification-bell {
                width: 36px;
                height: 36px;
            }

            .notification-bell i {
                font-size: 14px;
            }
        }

        /* Touch-friendly improvements for mobile devices */
        @media (hover: none) and (pointer: coarse) {
            .nav-link,
            .quick-action-btn,
            .user-profile,
            .notification-bell {
                min-height: 44px;
                min-width: 44px;
            }

            .nav-link:active,
            .quick-action-btn:active {
                background: var(--primary-hover);
                transform: scale(0.98);
            }

            .user-profile:active {
                transform: scale(0.98);
            }

            .notification-bell:active {
                transform: scale(0.95);
            }
        }

        /* Main Content Area */
        .main-content {
            background: var(--white);
            flex: 1;
            padding: 20px 24px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* Welcome Header */
        .welcome-header {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 24px;
            margin-bottom: 24px;
            border-radius: var(--border-radius);
            border: 1px solid var(--soft-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .welcome-content h2 {
            font-size: 22px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .welcome-content p {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 12px;
        }

        .date-time-info {
            text-align: right;
        }

        .current-date {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .current-time {
            font-size: 14px;
            color: var(--text-secondary);
            padding: 4px 12px;
            background: var(--white);
            border-radius: 20px;
            border: 1px solid var(--soft-gray);
        }

        .notification-bell {
            position: relative;
            background: var(--ash-gray);
            border: 1px solid var(--soft-gray);
            border-radius: 10px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .notification-bell:hover {
            background: var(--primary-blue);
            color: var(--white);
            box-shadow: var(--shadow-glow);
        }

        .notification-bell i {
            font-size: 16px;
        }

        /* Success Message Animations */
        @keyframes slideInRight {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOutRight {
            0% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--danger);
            color: var(--white);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            background: var(--ash-gray);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--soft-gray);
        }

        .user-profile:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-1px);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 14px;
            font-weight: 600;
            position: relative;
        }

        .user-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            border: 2px solid white;
            position: absolute;
            bottom: 0;
            right: 0;
        }

        .user-status.online {
            background: #10b981;
            animation: pulse 2s infinite;
        }

        .user-status.busy {
            background: #f59e0b;
        }

        .user-status.offline {
            background: #6b7280;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        .user-info h4 {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .user-info p {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Dashboard Content Grid */
        .dashboard-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .main-dashboard {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .sidebar-widgets {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* Health Overview Hero */
        .health-overview-hero {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            border-radius: var(--border-radius);
            padding: 24px;
            color: var(--white);
            box-shadow: var(--shadow-glow);
            margin-bottom: 20px;
        }

        .hero-content {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 24px;
            align-items: center;
        }

        .hero-text h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .hero-text p {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 16px;
        }

        .health-score {
            text-align: center;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(var(--white) 0deg 252deg, transparent 252deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            position: relative;
        }

        .score-circle::before {
            content: '';
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-blue);
            position: absolute;
        }

        .score-text {
            position: relative;
            z-index: 1;
            color: var(--white);
            font-size: 18px;
            font-weight: 700;
        }

        .score-label {
            font-size: 12px;
            opacity: 0.9;
        }

        /* Quick Stats Cards */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-soft);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover {
            box-shadow: var(--shadow-glow);
            transform: translateY(-3px);
            border-color: var(--primary-blue);
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:active {
            transform: translateY(-1px);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .stat-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: var(--white);
        }

        .stat-icon.appointments {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
        }

        .stat-icon.medications {
            background: linear-gradient(135deg, var(--success), #6EE7B7);
        }

        .stat-icon.vitals {
            background: linear-gradient(135deg, var(--warning), #FCD34D);
        }

        .stat-icon.reports {
            background: linear-gradient(135deg, var(--danger), #FCA5A5);
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .stat-change {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            font-weight: 500;
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--danger);
        }

        /* Interactive Health Calendar */
        .health-calendar-section {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-soft);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .calendar-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .btn-icon {
            width: 32px;
            height: 32px;
            border: 1px solid var(--soft-gray);
            background: var(--white);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            color: var(--text-primary);
        }

        .btn-icon:hover {
            background: var(--primary-blue);
            color: var(--white);
            box-shadow: var(--shadow-glow);
        }

        #currentMonth {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            min-width: 120px;
            text-align: center;
        }

        .calendar-container {
            margin-bottom: 16px;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            margin-bottom: 8px;
        }

        .calendar-day-header {
            text-align: center;
            padding: 8px 4px;
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            background: var(--ash-gray);
            border-radius: 4px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
        }

        .calendar-day {
            min-height: 36px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 4px 2px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--white);
            border: 1px solid var(--soft-gray);
            position: relative;
        }

        .calendar-day:hover {
            background: var(--ash-gray);
            transform: scale(1.02);
        }

        .calendar-day.other-month {
            color: var(--text-secondary);
            opacity: 0.5;
        }

        .calendar-day.today {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            color: var(--white);
            font-weight: 600;
        }

        .calendar-day.selected {
            background: var(--light-blue);
            color: var(--primary-blue);
            border-color: var(--primary-blue);
        }

        .day-number {
            font-size: 11px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .day-events {
            display: flex;
            flex-wrap: wrap;
            gap: 1px;
            justify-content: center;
        }

        .event-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .event-dot.appointment {
            background: var(--primary-blue);
        }

        .event-dot.medication {
            background: var(--success);
        }

        .event-dot.test {
            background: var(--warning);
        }

        .event-dot.goal {
            background: var(--danger);
        }

        .calendar-legend {
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: var(--text-secondary);
        }

        .legend-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .legend-dot.appointment {
            background: var(--primary-blue);
        }

        .legend-dot.medication {
            background: var(--success);
        }

        .legend-dot.test {
            background: var(--warning);
        }

        .legend-dot.goal {
            background: var(--danger);
        }

        .legend-dot.appointments {
            background: var(--primary-blue);
        }

        .legend-dot.medications {
            background: var(--success);
        }

        .legend-dot.lab-tests {
            background: var(--warning);
        }

        .legend-dot.health-goals {
            background: var(--danger);
        }

        /* Analytics Section */
        .analytics-section {
            margin: var(--space-8) 0;
        }

        .analytics-controls {
            display: flex;
            gap: var(--space-3);
            align-items: center;
        }

        .analytics-select {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-2) var(--space-4);
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .analytics-select:focus {
            border-color: var(--primary);
            box-shadow: var(--shadow-glow);
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-6);
            margin-top: var(--space-6);
        }

        .chart-widget {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
        }

        .chart-widget:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .chart-controls {
            display: flex;
            gap: var(--space-2);
        }

        .chart-btn {
            background: var(--gray-100);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-2) var(--space-4);
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .chart-btn:hover {
            background: var(--gray-200);
            color: var(--text-primary);
        }

        .chart-btn.active {
            background: var(--primary);
            color: var(--text-inverse);
            border-color: var(--primary);
        }

        .chart-container {
            height: 300px;
            margin-top: var(--space-4);
            position: relative;
        }

        .insights-widget {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
        }

        .insights-widget:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .insights-container {
            margin-top: var(--space-4);
        }

        .insight-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-3);
            padding: var(--space-4);
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-3);
            border-left: 4px solid var(--info);
            transition: all var(--transition-normal);
        }

        .insight-item:hover {
            background: var(--surface-hover);
            transform: translateX(4px);
        }

        .insight-item.critical {
            border-left-color: var(--error);
        }

        .insight-item.warning {
            border-left-color: var(--warning);
        }

        .insight-item.positive {
            border-left-color: var(--success);
        }

        .insight-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary);
            color: var(--text-inverse);
            font-size: 18px;
            flex-shrink: 0;
        }

        .insight-icon.critical {
            background: var(--error);
        }

        .insight-icon.warning {
            background: var(--warning);
        }

        .insight-icon.positive {
            background: var(--success);
        }

        .insight-content {
            flex: 1;
        }

        .insight-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .insight-message {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: var(--space-2);
        }

        .insight-action {
            background: var(--primary);
            color: var(--text-inverse);
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-md);
            font-size: 12px;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            transition: all var(--transition-normal);
        }

        .insight-action:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        /* Health Score Breakdown */
        .health-score-section {
            margin: var(--space-8) 0;
        }

        .score-breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: var(--space-4);
            margin-top: var(--space-6);
        }

        .score-category {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-5);
            display: flex;
            align-items: center;
            gap: var(--space-4);
            transition: all var(--transition-normal);
            cursor: pointer;
        }

        .score-category:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .category-icon {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-xl);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-inverse);
            font-size: 24px;
            flex-shrink: 0;
            box-shadow: var(--shadow-md);
        }

        .category-info {
            flex: 1;
        }

        .category-info h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .score-bar {
            width: 100%;
            height: 8px;
            background: var(--gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-bottom: var(--space-2);
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--primary));
            border-radius: var(--radius-full);
            transition: width 1s ease;
            position: relative;
        }

        .score-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .score-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
        }

        .legend-dot.exercise {
            background: #a855f7;
        }

        /* Enhanced Calendar Features */
        .calendar-actions {
            display: flex;
            gap: 8px;
        }

        .day-details {
            max-width: 500px;
        }

        .events-list {
            margin-bottom: 20px;
        }

        .event-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid;
        }

        .event-item.appointments {
            background: rgba(59, 130, 246, 0.1);
            border-left-color: var(--primary-blue);
        }

        .event-item.medications {
            background: rgba(34, 197, 94, 0.1);
            border-left-color: var(--success);
        }

        .event-item.lab-tests {
            background: rgba(245, 158, 11, 0.1);
            border-left-color: var(--warning);
        }

        .event-item.health-goals {
            background: rgba(239, 68, 68, 0.1);
            border-left-color: #ef4444;
        }

        .event-item.exercise {
            background: rgba(168, 85, 247, 0.1);
            border-left-color: #a855f7;
        }

        .event-time {
            font-weight: 600;
            color: var(--primary-blue);
            min-width: 70px;
        }

        .event-info {
            flex: 1;
        }

        .event-info h5 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .event-info p {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 2px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .event-actions {
            display: flex;
            gap: 4px;
        }

        .no-events {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .no-events i {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .day-actions {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--soft-gray);
        }

        .add-event-form {
            max-width: 400px;
        }

        .add-event-form .form-group {
            margin-bottom: 16px;
        }

        .add-event-form label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--text-primary);
        }

        .add-event-form .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--soft-gray);
            border-radius: 6px;
            font-size: 14px;
        }

        .add-event-form textarea {
            resize: vertical;
            min-height: 80px;
        }

        .event {
            font-size: 9px;
            padding: 1px 3px;
            border-radius: 3px;
            color: white;
            font-weight: 500;
            text-align: center;
            margin-bottom: 1px;
            cursor: pointer;
        }

        .event.appointments {
            background: var(--primary-blue);
        }

        .event.medications {
            background: var(--success);
        }

        .event.lab-tests {
            background: var(--warning);
        }

        .event.health-goals {
            background: #ef4444;
        }

        .event.exercise {
            background: #a855f7;
        }

        /* Floating AI Assistant */
        .ai-assistant-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .ai-chat-button {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            border: none;
            color: var(--white);
            font-size: 20px;
            cursor: pointer;
            box-shadow: var(--shadow-glow);
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        .ai-chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }

        .ai-chat-panel {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 320px;
            height: 400px;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            border: 1px solid var(--soft-gray);
            display: none;
            flex-direction: column;
        }

        .ai-chat-panel.active {
            display: flex;
        }

        .ai-chat-header {
            padding: 16px;
            border-bottom: 1px solid var(--soft-gray);
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            color: var(--white);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .ai-chat-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .ai-chat-subtitle {
            font-size: 11px;
            opacity: 0.9;
        }

        .ai-chat-content {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        .ai-chat-input {
            padding: 12px;
            border-top: 1px solid var(--soft-gray);
            display: flex;
            gap: 8px;
        }

        .ai-chat-input input {
            flex: 1;
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 12px;
            outline: none;
        }

        .ai-chat-input button {
            background: var(--primary-blue);
            color: var(--white);
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 12px;
        }

        /* Quick Action Floating Buttons */
        .quick-actions-float {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .floating-action-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: none;
            color: var(--white);
            font-size: 16px;
            cursor: pointer;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-action-btn:hover {
            transform: scale(1.1);
        }

        .floating-action-btn.emergency {
            background: linear-gradient(135deg, var(--danger), #FCA5A5);
            animation: emergencyPulse 1.5s infinite;
        }

        .floating-action-btn.voice {
            background: linear-gradient(135deg, var(--success), #6EE7B7);
        }

        .floating-action-btn.telehealth {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
        }

        .floating-action-btn.scanner {
            background: linear-gradient(135deg, var(--warning), #FCD34D);
        }

        @keyframes emergencyPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Smart Alerts Panel */
        .smart-alerts {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 300px;
            max-height: 400px;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            border: 1px solid var(--soft-gray);
            z-index: 999;
            display: none;
        }

        .smart-alerts.active {
            display: block;
        }

        .smart-alert-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--soft-gray);
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .smart-alert-item:last-child {
            border-bottom: none;
        }

        .alert-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--white);
            flex-shrink: 0;
            margin-top: 2px;
        }

        .alert-icon.critical {
            background: var(--danger);
            animation: criticalAlert 1s infinite;
        }

        .alert-icon.warning {
            background: var(--warning);
        }

        .alert-icon.info {
            background: var(--primary-blue);
        }

        @keyframes criticalAlert {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .alert-content h6 {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .alert-content p {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }

        .alert-actions {
            display: flex;
            gap: 8px;
        }

        .alert-btn {
            font-size: 10px;
            padding: 4px 8px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }

        .alert-btn.primary {
            background: var(--primary-blue);
            color: var(--white);
        }

        .alert-btn.secondary {
            background: var(--ash-gray);
            color: var(--text-primary);
        }

        /* Voice Command Indicator */
        .voice-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            background: rgba(59, 130, 246, 0.9);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            backdrop-filter: blur(10px);
        }

        .voice-indicator.active {
            display: flex;
            animation: voicePulse 1s infinite;
        }

        .voice-indicator i {
            font-size: 40px;
            color: var(--white);
        }

        @keyframes voicePulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        /* Health Gamification Elements */
        .health-streak {
            background: linear-gradient(135deg, var(--success), #6EE7B7);
            color: var(--white);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 12px;
        }

        .achievement-badge {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--warning), #FCD34D);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--white);
            margin-left: 8px;
        }

        /* Mini Widgets */
        .mini-widgets {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .mini-widget {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--ash-gray);
            border: 1px solid var(--soft-gray);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mini-widget:hover {
            background: var(--white);
            box-shadow: var(--shadow-soft);
            transform: translateY(-1px);
            border-color: var(--primary-blue);
        }

        .mini-widget-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: var(--white);
            flex-shrink: 0;
        }

        .mini-widget-icon.appointments {
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
        }

        .mini-widget-icon.medications {
            background: linear-gradient(135deg, #10B981, #047857);
        }

        .mini-widget-icon.vitals {
            background: linear-gradient(135deg, #F59E0B, #D97706);
        }

        .mini-widget-icon.reports {
            background: linear-gradient(135deg, #8B5CF6, #7C3AED);
        }

        .mini-widget-content {
            flex: 1;
            min-width: 0;
        }

        .mini-widget-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .mini-widget-label {
            font-size: 11px;
            color: var(--text-primary);
            font-weight: 500;
            margin-bottom: 2px;
        }

        .mini-widget-detail {
            font-size: 10px;
            color: var(--text-secondary);
        }

        /* Advanced Search with Voice */
        .search-container {
            position: relative;
        }

        .voice-search-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--primary-blue);
            cursor: pointer;
            font-size: 14px;
            padding: 4px;
        }

        .voice-search-btn:hover {
            color: var(--light-blue);
        }

        .voice-search-btn.listening {
            color: var(--danger);
            animation: voiceListening 1s infinite;
        }

        @keyframes voiceListening {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Sidebar Widgets */
        .widget {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 16px;
            box-shadow: var(--shadow-soft);
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .widget-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .widget-action {
            font-size: 12px;
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 500;
        }

        .widget-action:hover {
            text-decoration: underline;
        }

        /* Today's Schedule Widget */
        .schedule-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--ash-gray);
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 3px solid var(--primary-blue);
        }

        .schedule-time {
            font-size: 12px;
            font-weight: 600;
            color: var(--primary-blue);
            min-width: 50px;
        }

        .schedule-details h5 {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .schedule-details p {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Health Goals Widget */
        .goal-item {
            margin-bottom: 16px;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .goal-title {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .goal-percentage {
            font-size: 12px;
            color: var(--primary-blue);
            font-weight: 600;
        }

        .goal-progress {
            width: 100%;
            height: 6px;
            background: var(--soft-gray);
            border-radius: 3px;
            overflow: hidden;
        }

        .goal-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-blue), var(--light-blue));
            transition: width 0.3s ease;
        }

        /* Notifications Widget */
        .notification-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            background: var(--ash-gray);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .notification-icon {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--white);
            flex-shrink: 0;
        }

        .notification-icon.medication {
            background: var(--success);
        }

        .notification-icon.appointment {
            background: var(--primary-blue);
        }

        .notification-icon.health {
            background: var(--warning);
        }

        .notification-content h6 {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .notification-content p {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 13px;
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            color: var(--white);
            box-shadow: var(--shadow-soft);
        }

        .btn-primary:hover {
            box-shadow: var(--shadow-glow);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--ash-gray);
            color: var(--text-primary);
            border: 1px solid var(--soft-gray);
        }

        .btn-secondary:hover {
            background: var(--soft-gray);
            box-shadow: var(--shadow-soft);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: fixed;
                left: -260px;
                top: 0;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s ease;
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .dashboard-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 16px;
            }
            
            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .doctors-grid {
                grid-template-columns: 1fr;
            }

            .emergency-actions {
                grid-template-columns: 1fr;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .hospital-actions {
                flex-direction: column;
            }

            .call-actions {
                flex-direction: column;
            }

            .telehealth-header {
                flex-direction: column;
                gap: 12px;
                align-items: stretch;
            }
        }

        /* Loading States */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid var(--soft-gray);
            border-top: 2px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Status Indicators */
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }

        .status-dot.online {
            background: var(--success);
        }

        .status-dot.offline {
            background: var(--text-secondary);
        }

        .status-dot.warning {
            background: var(--warning);
        }

        /* Telehealth Section Styles */
        .telehealth-section {
            padding: 20px 0;
        }

        .telehealth-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .doctors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .doctor-card {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .doctor-card:hover {
            box-shadow: var(--shadow-glow);
            transform: translateY(-2px);
        }

        .doctor-card.available {
            border-left: 4px solid var(--success);
        }

        .doctor-card.busy {
            border-left: 4px solid var(--warning);
        }

        .doctor-avatar {
            position: relative;
            margin-bottom: 12px;
        }

        .doctor-avatar img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            position: absolute;
            bottom: 0;
            right: 0;
        }

        .status-indicator.online {
            background: var(--success);
        }

        .status-indicator.busy {
            background: var(--warning);
        }

        .doctor-info h5 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .doctor-info p {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 8px;
        }

        .doctor-rating {
            display: flex;
            gap: 8px;
            font-size: 12px;
            margin-bottom: 8px;
        }

        .availability {
            font-size: 12px;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
            margin-bottom: 12px;
        }

        .doctor-card.available .availability {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .doctor-card.busy .availability {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .start-call-btn, .schedule-btn {
            width: 100%;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .start-call-btn {
            background: var(--success);
            color: white;
        }

        .start-call-btn:hover {
            background: #16a34a;
            transform: translateY(-1px);
        }

        .schedule-btn {
            background: var(--warning);
            color: white;
        }

        .schedule-btn:hover {
            background: #d97706;
            transform: translateY(-1px);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--ash-gray);
            border-radius: 8px;
            font-size: 13px;
        }

        /* Emergency Section Styles */
        .emergency-section {
            padding: 20px 0;
        }

        .emergency-header {
            margin-bottom: 24px;
        }

        .emergency-status {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .pulse-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ef4444;
            animation: emergencyPulse 1.5s infinite;
        }

        @keyframes emergencyPulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }

        .location-info {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .emergency-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .emergency-card {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .emergency-card:hover {
            box-shadow: var(--shadow-glow);
            transform: translateY(-2px);
        }

        .emergency-card.critical {
            border-left: 4px solid #ef4444;
        }

        .emergency-card.urgent {
            border-left: 4px solid #f59e0b;
        }

        .emergency-card.warning {
            border-left: 4px solid #8b5cf6;
        }

        .emergency-card.info {
            border-left: 4px solid var(--primary-blue);
        }

        .emergency-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            flex-shrink: 0;
        }

        .emergency-card.critical .emergency-icon {
            background: #ef4444;
        }

        .emergency-card.urgent .emergency-icon {
            background: #f59e0b;
        }

        .emergency-card.warning .emergency-icon {
            background: #8b5cf6;
        }

        .emergency-card.info .emergency-icon {
            background: var(--primary-blue);
        }

        .emergency-content h5 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .emergency-content p {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 4px;
        }

        .emergency-time {
            font-size: 12px;
            font-weight: 500;
            color: var(--success);
        }

        .medical-summary {
            background: var(--ash-gray);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .info-item {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .info-item:last-child {
            margin-bottom: 0;
        }

        .emergency-tips ul {
            list-style: none;
            padding: 0;
        }

        .emergency-tips li {
            padding: 8px 0;
            border-bottom: 1px solid var(--soft-gray);
            font-size: 13px;
        }

        .emergency-tips li:last-child {
            border-bottom: none;
        }

        .emergency-tips li::before {
            content: "⚠️ ";
            margin-right: 8px;
        }

        /* Video Call Setup Styles */
        .video-call-setup {
            padding: 20px 0;
        }

        .call-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .call-status {
            color: var(--text-secondary);
            font-size: 13px;
            margin-top: 8px;
        }

        .video-preview {
            margin-bottom: 20px;
        }

        .local-video {
            background: #000;
            border-radius: 8px;
            aspect-ratio: 16/9;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .video-placeholder {
            text-align: center;
        }

        .video-placeholder i {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.7;
        }

        .video-controls {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
        }

        .control-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .control-btn.disabled {
            background: rgba(239, 68, 68, 0.8);
        }

        .pre-call-checklist {
            margin-bottom: 20px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            font-size: 13px;
        }

        .checklist-item i {
            color: var(--success);
            font-size: 16px;
        }

        .call-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .call-btn {
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 500;
        }

        /* Hospital Info Styles */
        .emergency-map {
            padding: 20px 0;
        }

        .hospital-info {
            margin-bottom: 20px;
        }

        .hospital-details {
            margin: 16px 0;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            font-size: 13px;
        }

        .detail-item i {
            color: var(--primary-blue);
            width: 16px;
        }

        .hospital-actions {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .current-wait-time {
            background: var(--ash-gray);
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }

        .wait-indicator {
            margin-top: 8px;
        }

        .wait-time {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-blue);
        }

        .wait-status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
            margin-top: 4px;
        }

        .wait-status.moderate {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        /* Enhanced Interactive Elements */
        .btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: width 0.6s, height 0.6s;
            transform: translate(-50%, -50%);
            z-index: 0;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn > * {
            position: relative;
            z-index: 1;
        }

        /* Hover animations for nav items */
        .nav-link {
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: var(--primary-blue);
            transition: left 0.3s ease;
        }

        .nav-link:hover::before,
        .nav-link.active::before {
            left: 0;
        }

        /* Card animation improvements */
        .stat-card, .mini-widget, .doctor-card, .emergency-card {
            transform-origin: center;
            will-change: transform;
        }

        .stat-card:hover, .mini-widget:hover, .doctor-card:hover, .emergency-card:hover {
            animation: cardBounce 0.3s ease-out;
        }

        @keyframes cardBounce {
            0% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-5px) scale(1.02); }
            100% { transform: translateY(-3px) scale(1.01); }
        }

        /* Real-time data animations */
        .stat-value {
            transition: all 0.5s ease;
        }

        .stat-value.updated {
            animation: dataUpdate 0.8s ease-out;
        }

        @keyframes dataUpdate {
            0% { transform: scale(1); color: var(--text-primary); }
            50% { transform: scale(1.1); color: var(--primary-blue); }
            100% { transform: scale(1); color: var(--text-primary); }
        }

        /* Loading skeletons */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Additional animations for enhanced interactivity */
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        /* Voice command animations */
        .sound-wave {
            display: flex;
            gap: 4px;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }

        .wave {
            width: 4px;
            height: 20px;
            background: var(--primary-blue);
            border-radius: 2px;
            animation: soundWave 0.8s ease-in-out infinite alternate;
        }

        .wave:nth-child(2) { animation-delay: 0.1s; }
        .wave:nth-child(3) { animation-delay: 0.2s; }
        .wave:nth-child(4) { animation-delay: 0.3s; }

        @keyframes soundWave {
            0% { height: 10px; }
            100% { height: 30px; }
        }

        .processing-dots {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 16px 0 8px;
        }

        .processing-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary-blue);
            animation: processingDots 1.4s ease-in-out infinite both;
        }

        .processing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .processing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes processingDots {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Notification styles */
        .notification-content {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
        }

        .notification-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .notification-message {
            flex: 1;
            font-size: 14px;
            line-height: 1.4;
        }

        .notification-action {
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .notification-action:hover {
            background: #2563eb;
        }

        .notification-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #6b7280;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .notification-close:hover {
            background: #f3f4f6;
        }

        /* Enhanced focus states */
        .nav-link:focus,
        .btn:focus,
        .stat-card:focus {
            outline: 2px solid var(--primary-blue);
            outline-offset: 2px;
        }

        /* Improved accessibility */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --white: #1f2937;
                --ash-gray: #374151;
                --soft-gray: #4b5563;
                --text-primary: #f9fafb;
                --text-secondary: #d1d5db;
            }
        }

        /* Additional utility animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
        }

        /* Enhanced stat card interactions */
        .stat-card {
            position: relative;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .stat-card:hover::after {
            opacity: 1;
        }

        /* Page Header Styles */
        .page-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 24px;
            color: white;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-info h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .header-info p {
            opacity: 0.9;
            font-size: 14px;
        }

        /* AI Assistant Page Styles */
        .ai-assistant-page {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            height: calc(100vh - 200px);
        }

        .ai-chat-container {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            background: var(--ash-gray);
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--soft-gray);
        }

        .ai-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .ai-info {
            flex: 1;
        }

        .ai-info h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .ai-status {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .chat-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 6px;
            background: var(--white);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: var(--primary-blue);
            color: white;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .ai-message .message-avatar {
            background: var(--primary-blue);
            color: white;
        }

        .user-message .message-avatar {
            background: var(--success);
            color: white;
        }

        .message-content {
            flex: 1;
            max-width: 80%;
        }

        .message-text {
            background: var(--ash-gray);
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            line-height: 1.4;
        }

        .user-message .message-text {
            background: var(--primary-blue);
            color: white;
        }

        .message-time {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .chat-input-container {
            border-top: 1px solid var(--soft-gray);
            padding: 16px 20px;
        }

        .quick-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .quick-action {
            background: var(--ash-gray);
            border: none;
            border-radius: 20px;
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .quick-action:hover {
            background: var(--primary-blue);
            color: white;
        }

        .chat-input {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .chat-input input {
            flex: 1;
            border: 1px solid var(--soft-gray);
            border-radius: 20px;
            padding: 10px 16px;
            font-size: 14px;
            outline: none;
        }

        .chat-input input:focus {
            border-color: var(--primary-blue);
        }

        .voice-btn, .send-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .voice-btn {
            background: var(--ash-gray);
            color: var(--text-secondary);
        }

        .voice-btn:hover {
            background: var(--warning);
            color: white;
        }

        .send-btn {
            background: var(--primary-blue);
            color: white;
        }

        .send-btn:hover {
            background: #2563eb;
        }

        /* AI Features Sidebar */
        .ai-features-sidebar {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .feature-widget {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .widget-header {
            background: var(--ash-gray);
            padding: 16px 20px;
            border-bottom: 1px solid var(--soft-gray);
        }

        .widget-header h4 {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .widget-content {
            padding: 20px;
        }

        .insight-item {
            display: flex;
            gap: 12px;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .insight-item:last-child {
            margin-bottom: 0;
        }

        .insight-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .insight-text h5 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .insight-text p {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .analytics-chart {
            margin-bottom: 16px;
        }

        .analytics-summary {
            display: flex;
            justify-content: space-between;
        }

        .metric {
            text-align: center;
        }

        .metric-label {
            display: block;
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .metric-value {
            font-size: 16px;
            font-weight: 600;
        }

        .metric-value.low {
            color: var(--success);
        }

        .emergency-contact {
            margin-bottom: 12px;
        }

        .emergency-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .emergency-btn {
            background: var(--primary-blue);
            color: white;
        }

        .emergency-btn.critical {
            background: #ef4444;
        }

        .emergency-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Health Assessments Page */
        .assessments-page {
            padding: 0;
        }

        .assessments-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
            gap: 24px;
        }

        .assessment-stats {
            display: flex;
            gap: 16px;
        }

        .stat-widget {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            min-width: 200px;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--primary-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-info {
            flex: 1;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .assessment-actions {
            display: flex;
            gap: 12px;
        }

        .assessments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .assessment-card {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .assessment-card:hover {
            box-shadow: var(--shadow-glow);
            transform: translateY(-2px);
        }

        .assessment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .assessment-type {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .assessment-type i {
            color: var(--primary-blue);
            font-size: 18px;
        }

        .assessment-type h4 {
            font-size: 16px;
            font-weight: 600;
        }

        .assessment-score {
            font-size: 20px;
            font-weight: 700;
            padding: 8px 12px;
            border-radius: 20px;
            color: white;
        }

        .assessment-score.excellent {
            background: var(--success);
        }

        .assessment-score.good {
            background: var(--primary-blue);
        }

        .assessment-score.fair {
            background: var(--warning);
        }

        .assessment-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .assessment-date {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .assessment-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 500;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .assessment-status.excellent .status-indicator {
            background: var(--success);
        }

        .assessment-status.good .status-indicator {
            background: var(--primary-blue);
        }

        .assessment-status.fair .status-indicator {
            background: var(--warning);
        }

        .assessment-actions {
            display: flex;
            gap: 8px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            border: 1px solid var(--soft-gray);
            border-radius: 6px;
            background: var(--white);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .btn-small:hover {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        /* Profile Page Styles */
        .profile-page {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
        }

        .profile-sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .profile-card {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 24px;
            text-align: center;
        }

        .profile-avatar {
            position: relative;
            display: inline-block;
            margin-bottom: 16px;
        }

        .avatar-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
            font-weight: 600;
        }

        .change-photo-btn {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 28px;
            height: 28px;
            border: 2px solid white;
            border-radius: 50%;
            background: var(--primary-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }

        .profile-info h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .profile-info p {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 8px;
        }

        .profile-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 12px;
            color: var(--success);
        }

        .profile-menu {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .menu-item {
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid var(--soft-gray);
            font-size: 14px;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background: var(--ash-gray);
        }

        .menu-item.active {
            background: var(--primary-blue);
            color: white;
        }

        .menu-item i {
            width: 16px;
            color: var(--text-secondary);
        }

        .menu-item.active i {
            color: white;
        }

        .profile-content {
            background: var(--white);
            border: 1px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 24px;
        }

        .profile-tab-content {
            max-width: 600px;
        }

        .form-section {
            margin-bottom: 32px;
        }

        .form-section h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .form-control {
            padding: 10px 12px;
            border: 1px solid var(--soft-gray);
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .form-actions {
            display: flex;
            gap: 12px;
            padding-top: 20px;
            border-top: 1px solid var(--soft-gray);
        }

        /* Toggle Switch Styles */
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-blue);
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        .preference-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        /* Assessment Type Cards */
        .assessment-types {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .assessment-type-card {
            background: var(--white);
            border: 2px solid var(--soft-gray);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .assessment-type-card:hover {
            border-color: var(--primary-blue);
            box-shadow: var(--shadow-glow);
        }

        .assessment-type-card i {
            font-size: 32px;
            color: var(--primary-blue);
            margin-bottom: 12px;
        }

        .assessment-type-card h5 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .assessment-type-card p {
            font-size: 13px;
            color: var(--text-secondary);
        }
            
        /* Reminders Page Styles */
        .reminders-page {
            padding: 20px;
        }

        .reminders-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .reminder-tab {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: #f8f9fa;
            color: #666;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reminder-tab:hover {
            background: #e9ecef;
        }

        .reminder-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .reminders-content {
            margin-top: 20px;
        }

        .reminder-tab-content {
            display: none;
        }

        .reminder-tab-content.active {
            display: block;
        }

        .reminders-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f3f4;
        }

        .section-header h3 {
            margin: 0;
            font-size: 24px;
            color: #2c3e50;
        }

        /* Medication Cards */
        .current-medications {
            display: grid;
            gap: 20px;
        }

        .medication-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .med-info {
            flex: 1;
        }

        .med-name {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .med-schedule {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .med-adherence {
            font-size: 12px;
            color: #27ae60;
            font-weight: 500;
        }

        .med-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            background: #e9ecef;
            color: #495057;
            transition: all 0.3s ease;
        }

        .btn-small:hover {
            background: #dee2e6;
        }

        /* Health Goals */
        .goals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .goal-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .goal-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: 15px;
        }

        .goal-info h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }

        .goal-target {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }

        .goal-progress {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        /* Diet Plans */
        .diet-plans {
            display: grid;
            gap: 20px;
        }

        .diet-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .diet-card.active {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }

        .diet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .diet-header h4 {
            margin: 0;
            color: #2c3e50;
        }

        .diet-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .diet-status.active {
            background: #d4edda;
            color: #155724;
        }

        .diet-status.completed {
            background: #cce5ff;
            color: #004085;
        }

        .diet-details p {
            margin: 0 0 10px 0;
            color: #666;
        }

        .diet-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }

        /* Weight Management */
        .weight-tracking {
            display: grid;
            gap: 30px;
        }

        .weight-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .weight-stat {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .weight-chart {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
        }

        .chart-placeholder {
            height: 200px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 16px;
        }

        .recent-entries {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
        }

        .weight-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f1f3f4;
        }

        .weight-entry:last-child {
            border-bottom: none;
        }

        .entry-date {
            font-weight: 500;
            color: #2c3e50;
        }

        .entry-weight {
            color: #666;
        }

        .entry-change {
            color: #27ae60;
            font-weight: 500;
        }

        /* Records Page Styles */
        .records-page {
            padding: 20px;
        }

        .records-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .record-stats {
            display: flex;
            gap: 30px;
        }

        .record-actions {
            display: flex;
            gap: 15px;
        }

        .records-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        /* Assessment Cards Styles */
        .assessments-page {
            padding: 20px;
        }

        .assessments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .assessment-stats {
            display: flex;
            gap: 30px;
        }

        .assessment-actions {
            display: flex;
            gap: 15px;
        }

        .assessments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .assessment-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }

        .assessment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .assessment-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .assessment-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            margin-right: 15px;
        }

        .assessment-info {
            flex: 1;
        }

        .assessment-info h4 {
            margin: 0 0 5px 0;
            color: #2c3e50;
            font-size: 18px;
        }

        .assessment-date {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        .assessment-score {
            font-size: 24px;
            font-weight: 700;
        }

        .assessment-body {
            margin-bottom: 20px;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .status-badge.excellent {
            background: #d4edda;
            color: #155724;
        }

        .status-badge.good {
            background: #cce5ff;
            color: #004085;
        }

        .status-badge.fair {
            background: #fff3cd;
            color: #856404;
        }

        .assessment-actions {
            display: flex;
            gap: 10px;
        }

        .assessment-actions .btn-small {
            flex: 1;
            text-align: center;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .reminders-nav {
                flex-direction: column;
                gap: 10px;
            }

            .reminder-tab {
                text-align: center;
            }

            .goals-grid {
                grid-template-columns: 1fr;
            }

            .weight-summary {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }

            .records-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .record-stats {
                justify-content: center;
                flex-wrap: wrap;
            }

            .assessments-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .assessment-stats {
                justify-content: center;
                flex-wrap: wrap;
            }

            .assessments-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Dynamic Dashboard Styles */
        .dynamic-content {
            min-height: 200px;
            padding: 16px;
        }

        .loading-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            color: #64748b;
            font-size: 14px;
            height: 100px;
        }

        .empty-state {
            text-align: center;
            padding: 32px 16px;
            color: #64748b;
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state p {
            margin: 16px 0;
            font-size: 16px;
        }

        /* Appointment Cards */
        .appointment-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid #007BFF;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .appointment-card:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }

        .appointment-card.today {
            background: linear-gradient(135deg, #007BFF20, #007BFF10);
            border-left-color: #10b981;
        }

        .appointment-type {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #007BFF;
            color: white;
        }

        .appointment-details h4 {
            margin: 0 0 4px 0;
            font-size: 16px;
            color: #1e293b;
        }

        .appointment-details p {
            margin: 2px 0;
            font-size: 14px;
            color: #64748b;
        }

        .appointment-time, .appointment-location {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #64748b;
            margin-top: 4px;
        }

        .appointment-actions {
            margin-left: auto;
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 6px;
            background: #e2e8f0;
            color: #64748b;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn:hover {
            background: #cbd5e1;
            color: #1e293b;
        }

        .action-btn.edit:hover {
            background: #fbbf24;
            color: white;
        }

        /* Medication Cards */
        .medication-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: #f0fdf4;
            border-radius: 12px;
            border-left: 4px solid #10b981;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .medication-card:hover {
            background: #dcfce7;
            transform: translateY(-2px);
        }

        .med-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #10b981;
            color: white;
            font-size: 16px;
        }

        .med-details h4 {
            margin: 0 0 4px 0;
            font-size: 16px;
            color: #1e293b;
        }

        .med-details p {
            margin: 2px 0;
            font-size: 14px;
            color: #64748b;
        }

        .med-schedule {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #059669;
            margin-top: 4px;
        }

        .med-actions {
            margin-left: auto;
        }

        /* Assessment Cards */
        .assessment-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: #fef3c7;
            border-radius: 12px;
            border-left: 4px solid #f59e0b;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .assessment-card:hover {
            background: #fef3c7;
            transform: translateY(-2px);
        }

        .assessment-type {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f59e0b;
            color: white;
            font-size: 16px;
        }

        .assessment-details h4 {
            margin: 0 0 4px 0;
            font-size: 16px;
            color: #1e293b;
        }

        .assessment-details p {
            margin: 2px 0;
            font-size: 14px;
            color: #64748b;
        }

        .assessment-score span {
            background: #f59e0b;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Chat Cards */
        .chat-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: #f0f9ff;
            border-radius: 12px;
            border-left: 4px solid #3b82f6;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .chat-card:hover {
            background: #dbeafe;
            transform: translateY(-2px);
        }

        .chat-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #3b82f6;
            color: white;
            font-size: 16px;
        }

        .chat-details h4 {
            margin: 0 0 4px 0;
            font-size: 16px;
            color: #1e293b;
        }

        .chat-details p {
            margin: 2px 0;
            font-size: 14px;
            color: #64748b;
        }

        .chat-time {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #3b82f6;
            margin-top: 4px;
        }

        .chat-actions {
            margin-left: auto;
        }

        .view-all-link {
            color: #007BFF;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .view-all-link:hover {
            color: #0056b3;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr !important;
            }
            
            .appointment-card,
            .medication-card,
            .assessment-card,
            .chat-card {
                padding: 12px;
            }
        }

        </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Top Navigation -->
        <div class="top-navigation">
            <div class="nav-content">
                <div class="logo">
                    <i class="fas fa-heartbeat"></i>
                    MediCare+
                </div>

                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link active" data-section="dashboard" onclick="loadSection('dashboard')">
                            <i class="fas fa-home"></i>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#appointments" class="nav-link" data-section="appointments" onclick="loadSection('appointments')">
                            <i class="fas fa-calendar-alt"></i>
                            Appointments
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#reminders" class="nav-link" data-section="reminders" onclick="loadSection('reminders')">
                            <i class="fas fa-bell"></i>
                            Reminders
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#records" class="nav-link" data-section="records" onclick="loadSection('records')">
                            <i class="fas fa-file-medical"></i>
                            Records
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="ai-health-assistant.html" class="nav-link">
                            <i class="fas fa-robot"></i>
                            AI Health Assistant
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#ai-assistant" class="nav-link" data-section="ai-assistant" onclick="loadSection('ai-assistant')">
                            <i class="fas fa-robot"></i>
                            AI Assistant
                        </a>
                    </li>
                </ul>

                <div class="quick-nav-actions">
                    <div class="notification-bell" onclick="toggleSmartAlerts()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="topNotificationCount">3</span>
                    </div>
                    <a href="#" class="quick-action-btn" onclick="signOut()" title="Sign Out">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Sign Out</span>
                    </a>
                    <div class="user-profile" onclick="loadSection('profile')">
                        <div class="user-avatar">
                            <span id="userInitials">JD</span>
                        </div>
                        <div class="user-status online"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Welcome Section -->
            <div class="welcome-header">
                <div class="welcome-content">
                    <h2>Good morning, <span id="userName">John Doe</span> 👋</h2>
                    <p>Here's your personalized health overview for today</p>
                    <div class="health-streak">
                        <i class="fas fa-fire"></i>
                        <span>7-day health streak!</span>
                        <div class="achievement-badge">🏆</div>
                    </div>
                </div>
                <div class="date-time-info">
                    <div class="current-date" id="currentDate">Friday, January 17, 2025</div>
                    <div class="current-time" id="currentTime">2:30 PM</div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Main Dashboard Area -->
                <div class="main-dashboard">
                    <!-- Health Overview Hero -->
                    <div class="health-overview-hero">
                        <div class="hero-content">
                            <div class="hero-text">
                                <h3>Your Health Score</h3>
                                <p>Based on your recent vitals, appointments, and health activities</p>
                                <a href="#" class="btn btn-secondary" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">
                                    <i class="fas fa-chart-line"></i>
                                    View Details
                                </a>
                            </div>
                            <div class="health-score">
                                <div class="score-circle">
                                    <div class="score-text" id="healthScore">85</div>
                                </div>
                                <div class="score-label">Excellent</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <div class="stat-card" onclick="openAppointments()" title="Click to view appointments">
                            <div class="stat-header">
                                <div class="stat-icon appointments">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="appointmentCount">3</div>
                            <div class="stat-label">Upcoming Appointments</div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                2 this week
                            </div>
                        </div>

                        <div class="stat-card" data-action="medication-reminder" title="Click to view medications">
                            <div class="stat-header">
                                <div class="stat-icon medications">
                                    <i class="fas fa-pills"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="medicationCount">5</div>
                            <div class="stat-label">Active Medications</div>
                            <div class="stat-change positive">
                                <i class="fas fa-check"></i>
                                95% adherence
                            </div>
                        </div>

                        <div class="stat-card" onclick="openVitals()" title="Click to view vital signs">
                            <div class="stat-header">
                                <div class="stat-icon vitals">
                                    <i class="fas fa-heartbeat"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="vitalTrend">Normal</div>
                            <div class="stat-label">Latest Vitals</div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                Improving trend
                            </div>
                        </div>

                        <div class="stat-card" data-action="view-reports" title="Click to view health reports">
                            <div class="stat-header">
                                <div class="stat-icon reports">
                                    <i class="fas fa-file-medical"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="reportCount">12</div>
                            <div class="stat-label">Health Reports</div>
                            <div class="stat-change positive">
                                <i class="fas fa-plus"></i>
                                2 new results
                            </div>
                        </div>
                    </div>

                    <!-- Dynamic Dashboard Sections -->
                    <div class="dynamic-dashboard-sections" style="margin: 24px 0;">
                        <div class="main-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                            <!-- Upcoming Appointments -->
                            <div class="widget">
                                <div class="widget-header">
                                    <h4 class="widget-title">
                                        <i class="fas fa-calendar-check"></i>
                                        Upcoming Appointments
                                    </h4>
                                    <a href="appointments.html" class="view-all-link">View All</a>
                                </div>
                                <div id="appointmentsContainer" class="dynamic-content">
                                    <div class="loading-placeholder">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading appointments...
                                    </div>
                                </div>
                            </div>

                            <!-- Active Medications -->
                            <div class="widget">
                                <div class="widget-header">
                                    <h4 class="widget-title">
                                        <i class="fas fa-pills"></i>
                                        Active Medications
                                    </h4>
                                    <a href="reminders.html" class="view-all-link">Manage</a>
                                </div>
                                <div id="medicationsContainer" class="dynamic-content">
                                    <div class="loading-placeholder">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading medications...
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="main-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                            <!-- Recent Health Assessments -->
                            <div class="widget">
                                <div class="widget-header">
                                    <h4 class="widget-title">
                                        <i class="fas fa-chart-line"></i>
                                        Recent Assessments
                                    </h4>
                                    <a href="ai-features.html" class="view-all-link">Take New</a>
                                </div>
                                <div id="assessmentsContainer" class="dynamic-content">
                                    <div class="loading-placeholder">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading assessments...
                                    </div>
                                </div>
                            </div>

                            <!-- Recent AI Conversations -->
                            <div class="widget">
                                <div class="widget-header">
                                    <h4 class="widget-title">
                                        <i class="fas fa-robot"></i>
                                        AI Health Assistant
                                    </h4>
                                    <a href="#" data-action="ai-chat" class="view-all-link">Start Chat</a>
                                </div>
                                <div id="aiChatContainer" class="dynamic-content">
                                    <div class="loading-placeholder">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading conversations...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Health Analytics Dashboard -->
                    <div class="analytics-section">
                        <div class="section-header">
                            <h3 class="section-title">
                                <i class="fas fa-chart-line"></i>
                                Health Analytics
                            </h3>
                            <div class="analytics-controls">
                                <select id="timeRange" class="analytics-select">
                                    <option value="7d">Last 7 days</option>
                                    <option value="30d" selected>Last 30 days</option>
                                    <option value="90d">Last 3 months</option>
                                    <option value="1y">Last year</option>
                                </select>
                            </div>
                        </div>
                        <div class="analytics-grid">
                            <div class="chart-widget">
                                <div class="widget-header">
                                    <h4 class="widget-title">Vital Signs Trends</h4>
                                    <div class="chart-controls">
                                        <button class="chart-btn active" data-chart="vitals">Vitals</button>
                                        <button class="chart-btn" data-chart="weight">Weight</button>
                                        <button class="chart-btn" data-chart="sleep">Sleep</button>
                                    </div>
                                </div>
                                <div class="chart-container">
                                    <canvas id="vitalsChart"></canvas>
                                </div>
                            </div>
                            
                            <div class="insights-widget">
                                <div class="widget-header">
                                    <h4 class="widget-title">
                                        <i class="fas fa-brain"></i>
                                        AI Health Insights
                                    </h4>
                                </div>
                                <div class="insights-container" id="healthInsights">
                                    <!-- AI insights will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Health Score Breakdown -->
                    <div class="health-score-section">
                        <div class="section-header">
                            <h3 class="section-title">Health Score Breakdown</h3>
                        </div>
                        <div class="score-breakdown-grid">
                            <div class="score-category">
                                <div class="category-icon">
                                    <i class="fas fa-heartbeat"></i>
                                </div>
                                <div class="category-info">
                                    <h4>Cardiovascular</h4>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 85%"></div>
                                    </div>
                                    <span class="score-value">85/100</span>
                                </div>
                            </div>
                            
                            <div class="score-category">
                                <div class="category-icon">
                                    <i class="fas fa-dumbbell"></i>
                                </div>
                                <div class="category-info">
                                    <h4>Physical Activity</h4>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 78%"></div>
                                    </div>
                                    <span class="score-value">78/100</span>
                                </div>
                            </div>
                            
                            <div class="score-category">
                                <div class="category-icon">
                                    <i class="fas fa-moon"></i>
                                </div>
                                <div class="category-info">
                                    <h4>Sleep Quality</h4>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 92%"></div>
                                    </div>
                                    <span class="score-value">92/100</span>
                                </div>
                            </div>
                            
                            <div class="score-category">
                                <div class="category-icon">
                                    <i class="fas fa-apple-alt"></i>
                                </div>
                                <div class="category-info">
                                    <h4>Nutrition</h4>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 68%"></div>
                                    </div>
                                    <span class="score-value">68/100</span>
                                </div>
                            </div>
                            
                            <div class="score-category">
                                <div class="category-icon">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <div class="category-info">
                                    <h4>Mental Health</h4>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 82%"></div>
                                    </div>
                                    <span class="score-value">82/100</span>
                                </div>
                            </div>
                            
                            <div class="score-category">
                                <div class="category-icon">
                                    <i class="fas fa-pills"></i>
                                </div>
                                <div class="category-info">
                                    <h4>Medication Adherence</h4>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 95%"></div>
                                    </div>
                                    <span class="score-value">95/100</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Health Calendar -->
                    <div class="health-calendar-section">
                        <div class="section-header">
                            <h3 class="section-title">Health Calendar</h3>
                            <div class="calendar-controls">
                                <button class="btn-icon" id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                                <span id="currentMonth">January 2025</span>
                                <button class="btn-icon" id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                                <button class="btn-primary" onclick="addHealthEvent()">
                                    <i class="fas fa-plus"></i>
                                    Add Event
                                </button>
                            </div>
                        </div>
                        <div class="calendar-container">
                            <div class="calendar-header">
                                <div class="calendar-day-header">Sun</div>
                                <div class="calendar-day-header">Mon</div>
                                <div class="calendar-day-header">Tue</div>
                                <div class="calendar-day-header">Wed</div>
                                <div class="calendar-day-header">Thu</div>
                                <div class="calendar-day-header">Fri</div>
                                <div class="calendar-day-header">Sat</div>
                            </div>
                            <div class="calendar-grid" id="calendarGrid">
                                <!-- Calendar days will be generated by JavaScript -->
                            </div>
                        </div>
                        <div class="calendar-legend">
                            <div class="legend-item">
                                <div class="legend-dot appointment"></div>
                                <span>Appointments</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-dot medication"></div>
                                <span>Medications</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-dot test"></div>
                                <span>Lab Tests</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-dot goal"></div>
                                <span>Health Goals</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar Widgets -->
                <div class="sidebar-widgets">
                    <!-- Today's Schedule -->
                    <div class="widget">
                        <div class="widget-header">
                            <h4 class="widget-title">Today's Schedule</h4>
                            <a href="#" class="widget-action">View All</a>
                        </div>
                        <div id="todaySchedule">
                            <div class="schedule-item">
                                <div class="schedule-time">10:00 AM</div>
                                <div class="schedule-details">
                                    <h5>Dr. Smith - Cardiology</h5>
                                    <p>Routine checkup</p>
                                </div>
                            </div>
                            <div class="schedule-item">
                                <div class="schedule-time">2:00 PM</div>
                                <div class="schedule-details">
                                    <h5>Blood Work</h5>
                                    <p>Lab appointment</p>
                                </div>
                            </div>
                            <div class="schedule-item">
                                <div class="schedule-time">6:00 PM</div>
                                <div class="schedule-details">
                                    <h5>Medication Reminder</h5>
                                    <p>Metformin 500mg</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Health Summary Widgets -->
                    <div class="widget">
                        <div class="widget-header">
                            <h4 class="widget-title">Health Summary</h4>
                            <a href="#" class="widget-action">View All</a>
                        </div>
                        <div class="mini-widgets">
                            <div class="mini-widget" onclick="openAppointments()">
                                <div class="mini-widget-icon appointments">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="mini-widget-content">
                                    <div class="mini-widget-value">5</div>
                                    <div class="mini-widget-label">Upcoming Appointments</div>
                                    <div class="mini-widget-detail">2 this week</div>
                                </div>
                            </div>
                            
                            <div class="mini-widget" data-action="medication-reminder">
                                <div class="mini-widget-icon medications">
                                    <i class="fas fa-pills"></i>
                                </div>
                                <div class="mini-widget-content">
                                    <div class="mini-widget-value">5</div>
                                    <div class="mini-widget-label">Active Medications</div>
                                    <div class="mini-widget-detail">95% adherence</div>
                                </div>
                            </div>
                            
                            <div class="mini-widget" onclick="openVitals()">
                                <div class="mini-widget-icon vitals">
                                    <i class="fas fa-heartbeat"></i>
                                </div>
                                <div class="mini-widget-content">
                                    <div class="mini-widget-value">Normal</div>
                                    <div class="mini-widget-label">Latest Vitals</div>
                                    <div class="mini-widget-detail">Improving trend</div>
                                </div>
                            </div>
                            
                            <div class="mini-widget" data-action="view-reports">
                                <div class="mini-widget-icon reports">
                                    <i class="fas fa-file-medical"></i>
                                </div>
                                <div class="mini-widget-content">
                                    <div class="mini-widget-value">12</div>
                                    <div class="mini-widget-label">Health Reports</div>
                                    <div class="mini-widget-detail">2 new results</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Health Goals -->
                    <div class="widget">
                        <div class="widget-header">
                            <h4 class="widget-title">Health Goals</h4>
                            <a href="#" class="widget-action">Manage</a>
                        </div>
                        <div id="healthGoals">
                            <div class="goal-item">
                                <div class="goal-header">
                                    <span class="goal-title">Weight Loss</span>
                                    <span class="goal-percentage">75%</span>
                                </div>
                                <div class="goal-progress">
                                    <div class="goal-progress-fill" style="width: 75%"></div>
                                </div>
                            </div>
                            <div class="goal-item">
                                <div class="goal-header">
                                    <span class="goal-title">Exercise (Weekly)</span>
                                    <span class="goal-percentage">60%</span>
                                </div>
                                <div class="goal-progress">
                                    <div class="goal-progress-fill" style="width: 60%"></div>
                                </div>
                            </div>
                            <div class="goal-item">
                                <div class="goal-header">
                                    <span class="goal-title">Medication Adherence</span>
                                    <span class="goal-percentage">95%</span>
                                </div>
                                <div class="goal-progress">
                                    <div class="goal-progress-fill" style="width: 95%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Notifications -->
                    <div class="widget">
                        <div class="widget-header">
                            <h4 class="widget-title">Recent Notifications</h4>
                            <a href="#" class="widget-action">Mark All Read</a>
                        </div>
                        <div id="recentNotifications">
                            <div class="notification-item">
                                <div class="notification-icon medication">
                                    <i class="fas fa-pills"></i>
                                </div>
                                <div class="notification-content">
                                    <h6>Medication Reminder</h6>
                                    <p>Take Metformin in 30 minutes</p>
                                </div>
                            </div>
                            <div class="notification-item">
                                <div class="notification-icon appointment">
                                    <i class="fas fa-calendar"></i>
                                </div>
                                <div class="notification-content">
                                    <h6>Appointment Tomorrow</h6>
                                    <p>Dr. Smith at 10:00 AM</p>
                                </div>
                            </div>
                            <div class="notification-item">
                                <div class="notification-icon health">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="notification-content">
                                    <h6>Lab Results Ready</h6>
                                    <p>Blood work from last week</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="widget">
                        <div class="widget-header">
                            <h4 class="widget-title">Quick Actions</h4>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <a href="#" class="btn btn-primary" onclick="scheduleAppointment()">
                                <i class="fas fa-plus"></i>
                                Schedule Appointment
                            </a>
                            <a href="#" class="btn btn-secondary" onclick="uploadHealthDoc()">
                                <i class="fas fa-upload"></i>
                                Upload Health Document
                            </a>
                            <a href="#" class="btn btn-secondary" data-action="health-assessment">
                                <i class="fas fa-clipboard-check"></i>
                                Health Assessment
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Smart Health Alerts -->
    <div class="smart-alerts" id="smartAlerts">
        <div class="smart-alert-item">
            <div class="alert-icon critical">
                <i class="fas fa-exclamation"></i>
            </div>
            <div class="alert-content">
                <h6>Blood Pressure Alert</h6>
                <p>Your recent reading (150/95) is higher than normal. Consider contacting your doctor.</p>
                <div class="alert-actions">
                    <button class="alert-btn primary">Contact Doctor</button>
                    <button class="alert-btn secondary">Dismiss</button>
                </div>
            </div>
        </div>
        <div class="smart-alert-item">
            <div class="alert-icon warning">
                <i class="fas fa-clock"></i>
            </div>
            <div class="alert-content">
                <h6>Medication Reminder</h6>
                <p>Time to take your Metformin 500mg</p>
                <div class="alert-actions">
                    <button class="alert-btn primary">Mark Taken</button>
                    <button class="alert-btn secondary">Snooze</button>
                </div>
            </div>
        </div>
        <div class="smart-alert-item">
            <div class="alert-icon info">
                <i class="fas fa-calendar"></i>
            </div>
            <div class="alert-content">
                <h6>Upcoming Appointment</h6>
                <p>Dr. Smith appointment tomorrow at 10:00 AM</p>
                <div class="alert-actions">
                    <button class="alert-btn primary">View Details</button>
                    <button class="alert-btn secondary">Set Reminder</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Voice Command Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <i class="fas fa-microphone"></i>
    </div>

    <!-- Include Chart.js and custom JavaScript -->
    <script>
        // Interactive Health Calendar Implementation
        let currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();

        // Sample health events data
        const healthEvents = {
            '2025-01-15': ['appointment', 'medication'],
            '2025-01-17': ['test', 'goal'],
            '2025-01-20': ['appointment'],
            '2025-01-23': ['medication', 'goal'],
            '2025-01-25': ['test'],
            '2025-01-28': ['appointment', 'medication']
        };

        function initializeCalendar() {
            renderCalendar();
            
            document.getElementById('prevMonth').addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar();
            });

            document.getElementById('nextMonth').addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar();
            });
        }

        function renderCalendar() {
            const monthNames = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"];
            
            document.getElementById('currentMonth').textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const daysInPrevMonth = new Date(currentYear, currentMonth, 0).getDate();
            
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            // Previous month's trailing days
            for (let i = firstDay - 1; i >= 0; i--) {
                const dayElement = createDayElement(daysInPrevMonth - i, true);
                calendarGrid.appendChild(dayElement);
            }
            
            // Current month's days
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = createDayElement(day, false);
                
                // Check if it's today
                const today = new Date();
                if (currentYear === today.getFullYear() && 
                    currentMonth === today.getMonth() && 
                    day === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                // Add events
                const dateKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                if (healthEvents[dateKey]) {
                    const eventsContainer = dayElement.querySelector('.day-events');
                    healthEvents[dateKey].forEach(eventType => {
                        const eventDot = document.createElement('div');
                        eventDot.className = `event-dot ${eventType}`;
                        eventsContainer.appendChild(eventDot);
                    });
                }
                
                calendarGrid.appendChild(dayElement);
            }
            
            // Next month's leading days
            const remainingCells = 42 - (firstDay + daysInMonth);
            for (let day = 1; day <= remainingCells; day++) {
                const dayElement = createDayElement(day, true);
                calendarGrid.appendChild(dayElement);
            }
        }

        function createDayElement(day, isOtherMonth) {
            const dayElement = document.createElement('div');
            dayElement.className = `calendar-day ${isOtherMonth ? 'other-month' : ''}`;
            dayElement.innerHTML = `
                <div class="day-number">${day}</div>
                <div class="day-events"></div>
            `;
            
            dayElement.addEventListener('click', () => {
                document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
                dayElement.classList.add('selected');
                showDayDetails(day, isOtherMonth);
            });
            
            return dayElement;
        }

        function showDayDetails(day, isOtherMonth) {
            console.log(`Selected day: ${day}, Other month: ${isOtherMonth}`);
            // Implement day details modal/panel
        }

        // Navigation functionality
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Here you would typically load the corresponding section content
                const section = this.getAttribute('data-section');
                loadSection(section);
            });
        });

        // Load section content (placeholder function)
        function loadSection(section) {
            console.log(`Loading section: ${section}`);
            // Implement actual section loading logic here
        }

        // AI Assistant Functions
        function startSymptomChecker() {
            console.log('Starting symptom checker...');
            // Implement symptom checker functionality
        }

        function analyzeHealthDocs() {
            console.log('Analyzing health documents...');
            // Implement document analysis functionality
        }

        function getMedicationAdvice() {
            console.log('Getting medication advice...');
            // Implement medication advice functionality
        }

        function getHealthInsights() {
            console.log('Getting health insights...');
            // Implement health insights functionality
        }

        // Dashboard Functions
        function toggleNotifications() {
            console.log('Toggling notifications...');
            // Implement notifications panel
        }

        function toggleUserMenu() {
            console.log('Toggling user menu...');
            // Implement user menu dropdown
        }

        function scheduleAppointment() {
            console.log('Scheduling appointment...');
            // Implement appointment scheduling
        }

        function uploadHealthDoc() {
            console.log('Uploading health document...');
            // Implement document upload
        }

        function startHealthAssessment() {
            console.log('Starting health assessment...');
            // Implement health assessment
        }

        // Advanced Feature Functions

        // Navigation Functions
        function loadSection(sectionName) {
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Add active class to clicked link
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');
            
            // Load section content
            switch(sectionName) {
                case 'dashboard':
                    showDashboardSection();
                    break;
                case 'appointments':
                    showAppointmentsSection();
                    break;
                case 'reminders':
                    showRemindersSection();
                    break;
                case 'records':
                    showRecordsSection();
                    break;
                case 'ai-assistant':
                    showAIAssistantSection();
                    break;
                case 'profile':
                    showProfileSection();
                    break;
                default:
                    showDashboardSection();
            }
        }

        // Quick Stat Card Functions
        function openAppointments() {
            loadSection('appointments');
            // Show appointments modal with enhanced features
            showModal('Upcoming Appointments', `
                <div class="appointments-quick-view">
                    <div class="appointment-item">
                        <div class="appointment-time">Today 2:30 PM</div>
                        <div class="appointment-doctor">Dr. Sarah Johnson - Cardiology</div>
                        <div class="appointment-actions">
                            <button onclick="rescheduleAppointment(1)" class="btn-sm btn-secondary">Reschedule</button>
                            <button onclick="joinTelehealth(1)" class="btn-sm btn-primary">Join Video Call</button>
                        </div>
                    </div>
                    <div class="appointment-item">
                        <div class="appointment-time">Monday 10:00 AM</div>
                        <div class="appointment-doctor">Dr. Mike Chen - General Practice</div>
                        <div class="appointment-actions">
                            <button onclick="rescheduleAppointment(2)" class="btn-sm btn-secondary">Reschedule</button>
                            <button onclick="cancelAppointment(2)" class="btn-sm btn-danger">Cancel</button>
                        </div>
                    </div>
                </div>
            `);
        }

        function openMedications() {
            loadSection('medications');
            showModal('Active Medications', `
                <div class="medications-quick-view">
                    <div class="medication-item">
                        <div class="med-name">Lisinopril 10mg</div>
                        <div class="med-schedule">Daily at 8:00 AM</div>
                        <div class="med-adherence">95% adherence this month</div>
                        <button onclick="setMedicationReminder('lisinopril')" class="btn-sm btn-primary">Set Reminder</button>
                    </div>
                    <div class="medication-item">
                        <div class="med-name">Metformin 500mg</div>
                        <div class="med-schedule">Twice daily with meals</div>
                        <div class="med-adherence">88% adherence this month</div>
                        <button onclick="refillMedication('metformin')" class="btn-sm btn-secondary">Request Refill</button>
                    </div>
                </div>
            `);
        }

        function openVitals() {
            showModal('Latest Vital Signs', `
                <div class="vitals-quick-view">
                    <div class="vital-reading">
                        <div class="vital-label">Blood Pressure</div>
                        <div class="vital-value">120/80 mmHg</div>
                        <div class="vital-status normal">Normal</div>
                    </div>
                    <div class="vital-reading">
                        <div class="vital-label">Heart Rate</div>
                        <div class="vital-value">72 bpm</div>
                        <div class="vital-status normal">Normal</div>
                    </div>
                    <div class="vital-reading">
                        <div class="vital-label">Weight</div>
                        <div class="vital-value">165 lbs</div>
                        <div class="vital-status positive">Down 2 lbs</div>
                    </div>
                    <button onclick="addVitalReading()" class="btn btn-primary">Add New Reading</button>
                </div>
            `);
        }

        function openHealthReports() {
            loadSection('dashboard');
            showModal('Recent Health Reports', `
                <div class="reports-quick-view">
                    <div class="report-item">
                        <div class="report-title">Blood Test Results</div>
                        <div class="report-date">January 15, 2025</div>
                        <div class="report-status">✅ All values normal</div>
                        <button onclick="viewReport('blood-test-1')" class="btn-sm btn-primary">View Details</button>
                    </div>
                    <div class="report-item">
                        <div class="report-title">ECG Report</div>
                        <div class="report-date">January 10, 2025</div>
                        <div class="report-status">⚠️ Minor irregularity noted</div>
                        <button onclick="viewReport('ecg-1')" class="btn-sm btn-primary">View Details</button>
                    </div>
                </div>
            `);
        }

        // Schedule Quick Appointment
        function scheduleQuickAppointment() {
            showModal('Quick Appointment Booking', `
                <div class="quick-booking">
                    <div class="form-group">
                        <label>Appointment Type</label>
                        <select id="appointmentType" class="form-control">
                            <option value="general">General Consultation</option>
                            <option value="followup">Follow-up Visit</option>
                            <option value="urgent">Urgent Care</option>
                            <option value="telehealth">Telehealth Session</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Preferred Date</label>
                        <input type="date" id="appointmentDate" class="form-control" min="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-group">
                        <label>Preferred Time</label>
                        <select id="appointmentTime" class="form-control">
                            <option value="morning">Morning (9:00 AM - 12:00 PM)</option>
                            <option value="afternoon">Afternoon (1:00 PM - 5:00 PM)</option>
                            <option value="evening">Evening (5:00 PM - 7:00 PM)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Brief Description</label>
                        <textarea id="appointmentNotes" class="form-control" placeholder="Brief description of your concerns..."></textarea>
                    </div>
                    <button data-action="book-appointment" class="btn btn-primary">Book Appointment</button>
                </div>
            `);
        }

        // AI Assistant Functions
        function toggleAIChat() {
            const panel = document.getElementById('aiChatPanel');
            panel.classList.toggle('active');
        }

        function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const content = document.getElementById('aiChatContent');
            const message = input.value.trim();
            
            if (message) {
                // Add user message
                const userMsg = document.createElement('div');
                userMsg.className = 'user-message';
                userMsg.innerHTML = `<strong>You:</strong> ${message}`;
                content.appendChild(userMsg);
                
                // Simulate AI response
                setTimeout(() => {
                    const aiMsg = document.createElement('div');
                    aiMsg.className = 'ai-message';
                    aiMsg.innerHTML = `<strong>AI:</strong> ${getAIResponse(message)}`;
                    content.appendChild(aiMsg);
                    content.scrollTop = content.scrollHeight;
                }, 1000);
                
                input.value = '';
                content.scrollTop = content.scrollHeight;
            }
        }

        function getAIResponse(message) {
            const responses = {
                'headache': 'Based on your symptoms, consider rest, hydration, and monitor your blood pressure. If it persists, contact your doctor.',
                'medication': 'Your current medications are well-managed. Remember to take Metformin at 6 PM today.',
                'appointment': 'Your next appointment is with Dr. Smith tomorrow at 10 AM. Would you like me to set a reminder?',
                'blood pressure': 'Your latest reading was 150/95, which is elevated. I recommend contacting Dr. Smith for guidance.',
                default: 'I understand your concern. Let me connect you with the appropriate health resource or schedule a consultation.'
            };
            
            const lowerMessage = message.toLowerCase();
            for (let key in responses) {
                if (lowerMessage.includes(key)) {
                    return responses[key];
                }
            }
            return responses.default;
        }

        // Voice Command Functions
        let isListening = false;
        let recognition;

        function toggleVoiceCommand() {
            if (!isListening) {
                startVoiceRecognition();
            } else {
                stopVoiceRecognition();
            }
        }

        function startVoiceRecognition() {
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';

                document.getElementById('voiceIndicator').classList.add('active');
                isListening = true;

                recognition.onresult = function(event) {
                    const command = event.results[0][0].transcript.toLowerCase();
                    processVoiceCommand(command);
                };

                recognition.onerror = function(event) {
                    console.error('Voice recognition error:', event.error);
                    stopVoiceRecognition();
                };

                recognition.onend = function() {
                    stopVoiceRecognition();
                };

                recognition.start();
            } else {
                alert('Voice recognition not supported in this browser');
            }
        }

        function stopVoiceRecognition() {
            document.getElementById('voiceIndicator').classList.remove('active');
            isListening = false;
            if (recognition) {
                recognition.stop();
            }
        }

        function processVoiceCommand(command) {
            console.log('Voice command:', command);
            
            if (command.includes('schedule appointment')) {
                scheduleAppointment();
            } else if (command.includes('show medications')) {
                loadSection('medications');
            } else if (command.includes('health score')) {
                alert('Your current health score is 85 - Excellent!');
            } else if (command.includes('call doctor')) {
                emergencyCall();
            } else if (command.includes('smart alerts')) {
                toggleSmartAlerts();
            } else {
                alert(`Command recognized: "${command}". Feature coming soon!`);
            }
        }

        // Emergency Functions
        function emergencyCall() {
            const confirmed = confirm('Are you experiencing a medical emergency? This will call emergency services.');
            if (confirmed) {
                // In a real app, this would integrate with emergency services
                alert('Emergency services contacted. Help is on the way.\n\nEmergency Contact: Dr. Smith\nPhone: (555) 123-4567');
            }
        }

        // Telehealth Functions
        function startTelehealth() {
            alert('Starting telehealth session...\n\nConnecting to Dr. Smith\nEstimated wait time: 2 minutes');
            // In a real app, this would integrate with video calling service
        }

        // Medication Scanner
        function openMedicationScanner() {
            alert('Opening medication scanner...\n\n📱 Point your camera at the medication bottle\n🔍 AI will identify and verify your prescription');
            // In a real app, this would open camera and use OCR/AI
        }

        // Smart Alerts Management
        function toggleSmartAlerts() {
            const alerts = document.getElementById('smartAlerts');
            alerts.classList.toggle('active');
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                alerts.classList.remove('active');
            }, 10000);
        }



        // Enhanced Search with Voice
        function addVoiceSearchCapability() {
            const searchContainers = document.querySelectorAll('.search-container');
            searchContainers.forEach(container => {
                const input = container.querySelector('input');
                const voiceBtn = document.createElement('button');
                voiceBtn.className = 'voice-search-btn';
                voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                voiceBtn.onclick = () => startVoiceSearch(input);
                container.appendChild(voiceBtn);
            });
        }

        function startVoiceSearch(input) {
            if ('webkitSpeechRecognition' in window) {
                const voiceRecognition = new webkitSpeechRecognition();
                voiceRecognition.continuous = false;
                voiceRecognition.interimResults = false;
                voiceRecognition.lang = 'en-US';

                const voiceBtn = input.nextElementSibling;
                voiceBtn.classList.add('listening');

                voiceRecognition.onresult = function(event) {
                    input.value = event.results[0][0].transcript;
                    input.dispatchEvent(new Event('input'));
                };

                voiceRecognition.onend = function() {
                    voiceBtn.classList.remove('listening');
                };

                voiceRecognition.start();
            }
        }

        // Predictive Health Analytics
        function generateHealthInsights() {
            const insights = [
                {
                    type: 'critical',
                    title: 'Blood Pressure Trend',
                    message: 'Your BP has been consistently high for 3 days. Consider reducing sodium intake.',
                    action: 'Contact Doctor'
                },
                {
                    type: 'warning',
                    title: 'Medication Adherence',
                    message: 'You missed 2 doses this week. Set up automatic reminders?',
                    action: 'Set Reminders'
                },
                {
                    type: 'positive',
                    title: 'Activity Goal',
                    message: 'Great job! You\'ve met your daily step goal 6/7 days this week.',
                    action: 'View Progress'
                }
            ];

            return insights;
        }

        // Modal System
        function showModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${title}</h3>
                        <button class="modal-close" onclick="closeModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        ${content}
                    </div>
                </div>
            `;
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) closeModal();
            });
            
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('active'), 10);
        }

        function closeModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => document.body.removeChild(modal), 300);
            }
        }

        // Section Loading Functions
        function showDashboardSection() {
            console.log('Loading dashboard section...');
        }

        // Initialize Charts and Analytics
        function initializeCharts() {
            initializeVitalsChart();
            loadHealthInsights();
            animateScoreBars();
        }

        function initializeVitalsChart() {
            const ctx = document.getElementById('vitalsChart');
            if (!ctx) return;

            const vitalsData = {
                labels: ['Jan 10', 'Jan 12', 'Jan 14', 'Jan 16', 'Jan 18', 'Jan 20', 'Jan 22'],
                datasets: [{
                    label: 'Blood Pressure (Systolic)',
                    data: [120, 125, 130, 135, 128, 132, 130],
                    borderColor: 'rgb(37, 99, 235)',
                    backgroundColor: 'rgba(37, 99, 235, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'Heart Rate',
                    data: [72, 75, 78, 80, 76, 78, 75],
                    borderColor: 'rgb(16, 185, 129)',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            };

            new Chart(ctx, {
                type: 'line',
                data: vitalsData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        function loadHealthInsights() {
            const insights = generateHealthInsights();
            const container = document.getElementById('healthInsights');
            if (!container) return;

            container.innerHTML = insights.map(insight => `
                <div class="insight-item ${insight.type}">
                    <div class="insight-icon ${insight.type}">
                        <i class="fas ${getInsightIcon(insight.type)}"></i>
                    </div>
                    <div class="insight-content">
                        <div class="insight-title">${insight.title}</div>
                        <div class="insight-message">${insight.message}</div>
                        <a href="#" class="insight-action" onclick="handleInsightAction('${insight.action}')">${insight.action}</a>
                    </div>
                </div>
            `).join('');
        }

        function getInsightIcon(type) {
            const icons = {
                critical: 'fa-exclamation-triangle',
                warning: 'fa-exclamation-circle',
                positive: 'fa-check-circle',
                info: 'fa-info-circle'
            };
            return icons[type] || 'fa-info-circle';
        }

        function handleInsightAction(action) {
            switch(action) {
                case 'Contact Doctor':
                    showModal('Contact Doctor', `
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-user-md" style="font-size: 48px; color: var(--primary); margin-bottom: 16px;"></i>
                            <h3>Dr. Smith - Cardiology</h3>
                            <p>Phone: (555) 123-4567</p>
                            <p>Email: dr.smith@healthcare.com</p>
                            <div style="margin-top: 20px;">
                                <button class="btn-primary" onclick="scheduleAppointment()">Schedule Appointment</button>
                                <button class="btn-secondary" onclick="startTelehealth()" style="margin-left: 10px;">Start Video Call</button>
                            </div>
                        </div>
                    `);
                    break;
                case 'Set Reminders':
                    window.location.href = 'reminders.html';
                    break;
                case 'View Progress':
                    showHealthProgress();
                    break;
                default:
                    alert(`Action: ${action}`);
            }
        }

        function animateScoreBars() {
            const scoreFills = document.querySelectorAll('.score-fill');
            scoreFills.forEach((fill, index) => {
                setTimeout(() => {
                    const width = fill.style.width;
                    fill.style.width = '0%';
                    setTimeout(() => {
                        fill.style.width = width;
                    }, 100);
                }, index * 200);
            });
        }

        function showHealthProgress() {
            showModal('Health Progress', `
                <div style="padding: 20px;">
                    <h3>Your Health Journey</h3>
                    <div style="margin: 20px 0;">
                        <h4>This Week's Achievements:</h4>
                        <ul style="margin-left: 20px;">
                            <li>✅ Completed 6/7 daily step goals</li>
                            <li>✅ Maintained medication schedule</li>
                            <li>✅ Improved sleep quality by 15%</li>
                            <li>⏰ 1 upcoming check-up appointment</li>
                        </ul>
                    </div>
                    <div style="margin: 20px 0;">
                        <h4>Areas for Improvement:</h4>
                        <ul style="margin-left: 20px;">
                            <li>🥗 Increase daily vegetable intake</li>
                            <li>💧 Drink more water (target: 8 glasses/day)</li>
                            <li>🧘 Add stress management activities</li>
                        </ul>
                    </div>
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn-primary" onclick="closeModal()">Continue Journey</button>
                    </div>
                </div>
            `);
        }

        // Chart Controls
        function switchChart(chartType) {
            const buttons = document.querySelectorAll('.chart-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update chart data based on type
            const ctx = document.getElementById('vitalsChart');
            const chart = Chart.getChart(ctx);
            
            if (chart) {
                switch(chartType) {
                    case 'vitals':
                        chart.data.datasets = [{
                            label: 'Blood Pressure (Systolic)',
                            data: [120, 125, 130, 135, 128, 132, 130],
                            borderColor: 'rgb(37, 99, 235)',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Heart Rate',
                            data: [72, 75, 78, 80, 76, 78, 75],
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        }];
                        break;
                    case 'weight':
                        chart.data.datasets = [{
                            label: 'Weight (lbs)',
                            data: [180, 179, 178, 179, 177, 178, 176],
                            borderColor: 'rgb(139, 92, 246)',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }];
                        break;
                    case 'sleep':
                        chart.data.datasets = [{
                            label: 'Sleep Hours',
                            data: [7.5, 8, 7, 8.5, 7.8, 8.2, 8],
                            borderColor: 'rgb(245, 158, 11)',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4,
                            fill: true
                        }];
                        break;
                }
                chart.update();
            }
        }

        // Add event listeners for chart controls
        document.addEventListener('DOMContentLoaded', function() {
            const chartButtons = document.querySelectorAll('.chart-btn');
            chartButtons.forEach(btn => {
                btn.addEventListener('click', () => switchChart(btn.dataset.chart));
            });
        });

        // Time range selector
        function changeTimeRange(range) {
            console.log('Changing time range to:', range);
            // Update charts and data based on selected time range
            loadHealthInsights(); // Refresh insights for new timeframe
        }

        // Add Health Event function
        function addHealthEvent() {
            showModal('Add Health Event', `
                <div style="padding: 20px;">
                    <form id="healthEventForm">
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Event Type:</label>
                            <select name="eventType" style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 8px;">
                                <option value="appointment">Doctor Appointment</option>
                                <option value="medication">Medication</option>
                                <option value="test">Lab Test</option>
                                <option value="goal">Health Goal</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Title:</label>
                            <input type="text" name="title" placeholder="Enter event title" style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 8px;">
                        </div>
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Date:</label>
                            <input type="date" name="date" style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 8px;">
                        </div>
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Time:</label>
                            <input type="time" name="time" style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 8px;">
                        </div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button type="button" class="btn-primary" onclick="saveHealthEvent()">Save Event</button>
                            <button type="button" class="btn-secondary" onclick="closeModal()" style="margin-left: 10px;">Cancel</button>
                        </div>
                    </form>
                </div>
            `);
        }

        function saveHealthEvent() {
            const form = document.getElementById('healthEventForm');
            const formData = new FormData(form);
            const eventData = Object.fromEntries(formData);
            
            console.log('Saving health event:', eventData);
            
            // In a real app, this would save to the database
            alert('Health event saved successfully!');
            closeModal();
            
            // Refresh calendar to show new event
            generateCalendar();
        }

        function showAppointmentsSection() {
            console.log('Loading appointments section...');
        }

        function showRemindersSection() {
            const mainContent = document.querySelector('.main-content');
            mainContent.innerHTML = `
                <div class="page-header">
                    <div class="header-content">
                        <div class="header-info">
                            <h2><i class="fas fa-bell"></i> Smart Reminders & Health Management</h2>
                            <p>Manage your medications, health goals, diet plans, and weight management</p>
                        </div>
                        <button class="btn btn-primary" onclick="loadSection('dashboard')">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>

                <div class="reminders-page">
                    <!-- Category Navigation -->
                    <div class="reminders-nav">
                        <button class="reminder-tab active" onclick="switchReminderTab('medications')">
                            <i class="fas fa-pills"></i>
                            Medication Reminders
                        </button>
                        <button class="reminder-tab" onclick="switchReminderTab('health-goals')">
                            <i class="fas fa-target"></i>
                            Health Goals
                        </button>
                        <button class="reminder-tab" onclick="switchReminderTab('diet-plans')">
                            <i class="fas fa-utensils"></i>
                            Diet Plans
                        </button>
                        <button class="reminder-tab" onclick="switchReminderTab('weight-management')">
                            <i class="fas fa-weight"></i>
                            Weight Management
                        </button>
                    </div>

                    <!-- Content Area -->
                    <div class="reminders-content">
                        <div id="medicationsTab" class="reminder-tab-content active">
                            ${generateMedicationRemindersContent()}
                        </div>
                        <div id="health-goalsTab" class="reminder-tab-content">
                            ${generateHealthGoalsContent()}
                        </div>
                        <div id="diet-plansTab" class="reminder-tab-content">
                            ${generateDietPlansContent()}
                        </div>
                        <div id="weight-managementTab" class="reminder-tab-content">
                            ${generateWeightManagementContent()}
                        </div>
                    </div>
                </div>
            `;
        }



        function showAIAssistantSection() {
            const mainContent = document.querySelector('.main-content');
            mainContent.innerHTML = `
                <div class="page-header">
                    <div class="header-content">
                        <div class="header-info">
                            <h2><i class="fas fa-robot"></i> Previous Health Assessments</h2>
                            <p>View and manage your completed AI health assessments</p>
                        </div>
                        <button class="btn btn-primary" onclick="loadSection('dashboard')">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>

                <div class="assessments-page">
                    <div class="assessments-header">
                        <div class="assessment-stats">
                            <div class="stat-widget">
                                <div class="stat-icon">
                                    <i class="fas fa-clipboard-list"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number">12</div>
                                    <div class="stat-label">Total Assessments</div>
                                </div>
                            </div>
                            <div class="stat-widget">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number">3</div>
                                    <div class="stat-label">This Month</div>
                                </div>
                            </div>
                            <div class="stat-widget">
                                <div class="stat-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number">85%</div>
                                    <div class="stat-label">Average Score</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-actions">
                            <button class="btn btn-success" onclick="window.location.href='ai-health-assistant.html'">
                                <i class="fas fa-plus"></i>
                                Take New Assessment
                            </button>
                            <button class="btn btn-secondary" onclick="exportAllAssessments()">
                                <i class="fas fa-download"></i>
                                Export Data
                            </button>
                        </div>
                    </div>

                    <div class="assessments-grid">
                        ${generatePrevious12Assessments()}
                    </div>
                </div>
            `;
        }

        function showRecordsSection() {
            const mainContent = document.querySelector('.main-content');
            mainContent.innerHTML = `
                <div class="page-header">
                    <div class="header-content">
                        <div class="header-info">
                            <h2><i class="fas fa-file-medical"></i> Health Records & Assessment History</h2>
                            <p>View your previous health assessments and medical records</p>
                        </div>
                        <button class="btn btn-primary" onclick="loadSection('dashboard')">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>

                <div class="records-page">
                    <div class="records-header">
                        <div class="record-stats">
                            <div class="stat-widget">
                                <div class="stat-icon">
                                    <i class="fas fa-clipboard-list"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number">12</div>
                                    <div class="stat-label">Total Assessments</div>
                                </div>
                            </div>
                            <div class="stat-widget">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number">3</div>
                                    <div class="stat-label">This Month</div>
                                </div>
                            </div>
                            <div class="stat-widget">
                                <div class="stat-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number">85%</div>
                                    <div class="stat-label">Average Score</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="record-actions">
                            <button class="btn btn-primary" onclick="window.location.href='ai-health-assistant.html'">
                                <i class="fas fa-robot"></i>
                                Take New Assessment
                            </button>
                            <button class="btn btn-secondary" onclick="exportAllRecords()">
                                <i class="fas fa-download"></i>
                                Export All Records
                            </button>
                        </div>
                    </div>

                    <div class="records-grid">
                        ${generateAssessmentHistory()}
                    </div>
                </div>
            `;
        }

        function showProfileSection() {
            const mainContent = document.querySelector('.main-content');
            mainContent.innerHTML = `
                <div class="page-header">
                    <div class="header-content">
                        <div class="header-info">
                            <h2><i class="fas fa-user"></i> My Profile</h2>
                            <p>Manage your personal information and preferences</p>
                        </div>
                        <button class="btn btn-primary" onclick="loadSection('dashboard')">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>

                <div class="profile-page">
                    <div class="profile-sidebar">
                        <div class="profile-card">
                            <div class="profile-avatar">
                                <div class="avatar-circle">
                                    <span>JD</span>
                                </div>
                                <button class="change-photo-btn">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                            <div class="profile-info">
                                <h3>John Doe</h3>
                                <p>Patient ID: PAT-2025-001</p>
                                <div class="profile-status">
                                    <span class="status-dot online"></span>
                                    Active Patient
                                </div>
                            </div>
                        </div>

                        <div class="profile-menu">
                            <div class="menu-item active" onclick="showProfileTab('personal')">
                                <i class="fas fa-user"></i>
                                Personal Information
                            </div>
                            <div class="menu-item" onclick="showProfileTab('medical')">
                                <i class="fas fa-heartbeat"></i>
                                Medical History
                            </div>
                            <div class="menu-item" onclick="showProfileTab('insurance')">
                                <i class="fas fa-shield-alt"></i>
                                Insurance
                            </div>
                            <div class="menu-item" onclick="showProfileTab('emergency')">
                                <i class="fas fa-phone"></i>
                                Emergency Contacts
                            </div>
                            <div class="menu-item" onclick="showProfileTab('preferences')">
                                <i class="fas fa-cog"></i>
                                Preferences
                            </div>
                            <div class="menu-item" onclick="showProfileTab('security')">
                                <i class="fas fa-lock"></i>
                                Security
                            </div>
                        </div>
                    </div>

                    <div class="profile-content">
                        <div id="profileTabContent">
                            ${generatePersonalInfoTab()}
                        </div>
                    </div>
                </div>
            `;
        }

        function showHealthGoalsSection() {
            console.log('Loading health goals section...');
        }

        // Supporting Functions
        function confirmQuickBooking() {
            const type = document.getElementById('appointmentType').value;
            const date = document.getElementById('appointmentDate').value;
            const time = document.getElementById('appointmentTime').value;
            const notes = document.getElementById('appointmentNotes').value;
            
            if (!date) {
                alert('Please select a date for your appointment.');
                return;
            }
            
            alert(`Appointment booked successfully!\n\nType: ${type}\nDate: ${date}\nTime: ${time}\nNotes: ${notes || 'None'}\n\nYou'll receive a confirmation email shortly.`);
            closeModal();
        }

        function rescheduleAppointment(id) {
            alert(`Rescheduling appointment ${id}...\nYou'll be redirected to the scheduling system.`);
            closeModal();
        }

        function joinTelehealth(id) {
            alert(`Starting telehealth session for appointment ${id}...\nConnecting to video call...`);
            closeModal();
        }

        function cancelAppointment(id) {
            if (confirm('Are you sure you want to cancel this appointment?')) {
                alert(`Appointment ${id} has been cancelled.\nCancellation confirmation sent to your email.`);
                closeModal();
            }
        }

        function setMedicationReminder(medication) {
            alert(`Setting up smart reminders for ${medication}...\nYou'll receive notifications on your phone and smart watch.`);
            closeModal();
        }

        function refillMedication(medication) {
            alert(`Requesting refill for ${medication}...\nYour pharmacy will be contacted automatically.`);
            closeModal();
        }

        function addVitalReading() {
            showModal('Add Vital Reading', `
                <div class="vital-form">
                    <div class="form-group">
                        <label>Blood Pressure</label>
                        <div class="bp-inputs">
                            <input type="number" placeholder="Systolic" class="form-control" style="width: 48%; display: inline-block;">
                            <span style="margin: 0 2%;">/</span>
                            <input type="number" placeholder="Diastolic" class="form-control" style="width: 48%; display: inline-block;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Heart Rate (bpm)</label>
                        <input type="number" class="form-control" placeholder="72">
                    </div>
                    <div class="form-group">
                        <label>Weight (lbs)</label>
                        <input type="number" class="form-control" placeholder="165">
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea class="form-control" placeholder="Any additional notes..."></textarea>
                    </div>
                    <button onclick="saveVitalReading()" class="btn btn-primary">Save Reading</button>
                </div>
            `);
        }

        function saveVitalReading() {
            alert('Vital reading saved successfully!\nYour data has been logged and your doctor has been notified.');
            closeModal();
        }

        function viewReport(reportId) {
            alert(`Opening detailed report: ${reportId}\nThis would show the full medical report with AI insights.`);
            closeModal();
        }

        // Reminder System Functions
        function showReminderCategory(category) {
            // Update active button
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const content = document.getElementById('reminderContent');
            
            switch(category) {
                case 'medications':
                    content.innerHTML = `
                        <div class="add-reminder-section">
                            <h4>Add New Medication Reminder</h4>
                            <div class="form-group">
                                <label>Medication Name</label>
                                <input type="text" id="medicationName" class="form-control" placeholder="e.g., Lisinopril 10mg">
                            </div>
                            <div class="form-group">
                                <label>Dosage Instructions</label>
                                <input type="text" id="medicationDosage" class="form-control" placeholder="e.g., 1 tablet daily">
                            </div>
                            <div class="form-group">
                                <label>Reminder Time</label>
                                <input type="time" id="reminderTime" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Frequency</label>
                                <select id="reminderFrequency" class="form-control">
                                    <option value="daily">Daily</option>
                                    <option value="twice-daily">Twice Daily</option>
                                    <option value="three-times">Three Times Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="as-needed">As Needed</option>
                                </select>
                            </div>
                            <button onclick="addMedicationReminder()" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Add Reminder
                            </button>
                        </div>
                        
                        <div class="current-reminders">
                            <h4>Current Medication Reminders</h4>
                            <div class="reminder-item">
                                <div class="reminder-info">
                                    <strong>Lisinopril 10mg</strong>
                                    <p>1 tablet daily at 8:00 AM</p>
                                    <small>95% adherence this month</small>
                                </div>
                                <div class="reminder-actions">
                                    <button class="btn-sm btn-secondary" onclick="editReminder(1)">Edit</button>
                                    <button class="btn-sm btn-danger" onclick="deleteReminder(1)">Delete</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'goals':
                    content.innerHTML = `
                        <div class="add-reminder-section">
                            <h4>AI-Recommended Health Goals</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 20px;">Based on your recent AI health assessment</p>
                            
                            <div class="ai-goal-recommendations">
                                <div class="goal-recommendation">
                                    <div class="goal-icon"><i class="fas fa-heartbeat"></i></div>
                                    <div class="goal-details">
                                        <h5>Cardiovascular Health</h5>
                                        <p>Walk 8,000 steps daily to improve heart health</p>
                                        <button onclick="addGoalFromAI('cardiovascular')" class="btn-sm btn-primary">Add Goal</button>
                                    </div>
                                </div>
                                
                                <div class="goal-recommendation">
                                    <div class="goal-icon"><i class="fas fa-weight"></i></div>
                                    <div class="goal-details">
                                        <h5>Weight Management</h5>
                                        <p>Lose 2 lbs per month through balanced nutrition</p>
                                        <button onclick="addGoalFromAI('weight')" class="btn-sm btn-primary">Add Goal</button>
                                    </div>
                                </div>
                                
                                <div class="goal-recommendation">
                                    <div class="goal-icon"><i class="fas fa-moon"></i></div>
                                    <div class="goal-details">
                                        <h5>Sleep Quality</h5>
                                        <p>Maintain 7-8 hours of quality sleep nightly</p>
                                        <button onclick="addGoalFromAI('sleep')" class="btn-sm btn-primary">Add Goal</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'diet':
                    content.innerHTML = `
                        <div class="add-reminder-section">
                            <h4>AI-Personalized Diet Plans</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 20px;">Customized based on your health assessment and medical history</p>
                            
                            <div class="diet-plans">
                                <div class="diet-plan-card">
                                    <div class="plan-header">
                                        <h5>Heart-Healthy Mediterranean Plan</h5>
                                        <span class="plan-badge recommended">AI Recommended</span>
                                    </div>
                                    <div class="plan-details">
                                        <p>• Low sodium, high omega-3 diet</p>
                                        <p>• 1,800 calories daily</p>
                                        <p>• Rich in vegetables, fish, and whole grains</p>
                                    </div>
                                    <button onclick="adoptDietPlan('mediterranean')" class="btn btn-primary">Adopt This Plan</button>
                                </div>
                                
                                <div class="diet-plan-card">
                                    <div class="plan-header">
                                        <h5>Diabetic-Friendly Low-Carb Plan</h5>
                                        <span class="plan-badge">Personalized</span>
                                    </div>
                                    <div class="plan-details">
                                        <p>• Stabilizes blood sugar levels</p>
                                        <p>• 1,600 calories daily</p>
                                        <p>• Focuses on protein and healthy fats</p>
                                    </div>
                                    <button onclick="adoptDietPlan('low-carb')" class="btn btn-secondary">View Details</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'weight':
                    content.innerHTML = `
                        <div class="add-reminder-section">
                            <h4>AI-Guided Weight Management</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 20px;">Smart plans based on your metabolism and health data</p>
                            
                            <div class="weight-management-options">
                                <div class="weight-option">
                                    <div class="option-icon loss"><i class="fas fa-arrow-down"></i></div>
                                    <div class="option-content">
                                        <h5>Weight Loss Plan</h5>
                                        <p>Lose 1-2 lbs per week safely</p>
                                        <div class="plan-features">
                                            <span>🎯 Goal: -10 lbs in 3 months</span>
                                            <span>🔥 1,500 cal/day target</span>
                                            <span>💪 3x/week exercise</span>
                                        </div>
                                        <button onclick="startWeightPlan('loss')" class="btn btn-primary">Start Weight Loss</button>
                                    </div>
                                </div>
                                
                                <div class="weight-option">
                                    <div class="option-icon gain"><i class="fas fa-arrow-up"></i></div>
                                    <div class="option-content">
                                        <h5>Healthy Weight Gain</h5>
                                        <p>Gain muscle mass and healthy weight</p>
                                        <div class="plan-features">
                                            <span>🎯 Goal: +5 lbs in 2 months</span>
                                            <span>🔥 2,200 cal/day target</span>
                                            <span>💪 Strength training focus</span>
                                        </div>
                                        <button onclick="startWeightPlan('gain')" class="btn btn-secondary">Start Weight Gain</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
            }
        }

        function addMedicationReminder() {
            const name = document.getElementById('medicationName').value;
            const dosage = document.getElementById('medicationDosage').value;
            const time = document.getElementById('reminderTime').value;
            const frequency = document.getElementById('reminderFrequency').value;
            
            if (!name || !dosage || !time) {
                alert('Please fill in all required fields.');
                return;
            }
            
            alert(`Medication reminder added successfully!\n\nMedication: ${name}\nDosage: ${dosage}\nTime: ${time}\nFrequency: ${frequency}\n\nYou'll receive notifications on your phone and smartwatch.`);
            
            // Refresh the reminder list (in a real app, this would update the backend)
            showReminderCategory('medications');
        }

        function addGoalFromAI(goalType) {
            const goals = {
                'cardiovascular': 'Walk 8,000 steps daily',
                'weight': 'Lose 2 lbs per month',
                'sleep': 'Sleep 7-8 hours nightly'
            };
            
            alert(`Health goal added from AI recommendation!\n\nGoal: ${goals[goalType]}\n\nProgress tracking and reminders have been set up. You'll receive daily motivation and progress updates.`);
        }

        function adoptDietPlan(planType) {
            const plans = {
                'mediterranean': 'Heart-Healthy Mediterranean Plan',
                'low-carb': 'Diabetic-Friendly Low-Carb Plan'
            };
            
            alert(`Diet plan adopted successfully!\n\nPlan: ${plans[planType]}\n\nYou'll receive:\n• Daily meal suggestions\n• Shopping lists\n• Nutrition tracking\n• Progress monitoring`);
        }

        function startWeightPlan(planType) {
            const plans = {
                'loss': 'Weight Loss Plan (1-2 lbs/week)',
                'gain': 'Healthy Weight Gain Plan (+5 lbs in 2 months)'
            };
            
            alert(`Weight management plan started!\n\nPlan: ${plans[planType]}\n\nFeatures activated:\n• Daily calorie tracking\n• Workout reminders\n• Progress photos\n• Weekly check-ins\n• AI coaching tips`);
        }

        function editReminder(id) {
            alert(`Editing reminder ${id}...\nYou can modify the time, frequency, or dosage.`);
        }

        function deleteReminder(id) {
            if (confirm('Are you sure you want to delete this reminder?')) {
                alert(`Reminder ${id} has been deleted successfully.`);
            }
        }

        // Telehealth Functions
        function filterDoctors(specialty) {
            console.log(`Filtering doctors by specialty: ${specialty}`);
            // In a real app, this would filter the doctors list
        }

        function startConsultation(doctorId) {
            showModal('Starting Video Consultation', `
                <div class="video-call-setup">
                    <div class="call-header">
                        <h4>Connecting to Dr. Sarah Smith</h4>
                        <div class="call-status">Initializing secure connection...</div>
                    </div>
                    
                    <div class="video-preview">
                        <div class="local-video">
                            <div class="video-placeholder">
                                <i class="fas fa-user"></i>
                                <p>Your Camera</p>
                            </div>
                            <div class="video-controls">
                                <button class="control-btn" onclick="toggleCamera()">
                                    <i class="fas fa-video"></i>
                                </button>
                                <button class="control-btn" onclick="toggleMicrophone()">
                                    <i class="fas fa-microphone"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pre-call-checklist">
                        <h5>Pre-Call Checklist</h5>
                        <div class="checklist-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Camera and microphone ready</span>
                        </div>
                        <div class="checklist-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Stable internet connection</span>
                        </div>
                        <div class="checklist-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Medical records accessible</span>
                        </div>
                    </div>
                    
                    <div class="call-actions">
                        <button class="btn btn-primary call-btn" onclick="initiateCall()">
                            <i class="fas fa-video"></i>
                            Start Video Call
                        </button>
                        <button class="btn btn-secondary" onclick="closeModal()">
                            Cancel
                        </button>
                    </div>
                </div>
            `);
        }

        function scheduleConsultation(doctorId) {
            alert('Scheduling consultation with Dr. Mike Johnson...\n\nNext available slots:\n• Today 3:30 PM\n• Tomorrow 9:00 AM\n• Tomorrow 2:15 PM');
        }

        function toggleCamera() {
            const btn = event.target.closest('.control-btn');
            btn.classList.toggle('disabled');
            console.log('Camera toggled');
        }

        function toggleMicrophone() {
            const btn = event.target.closest('.control-btn');
            btn.classList.toggle('disabled');
            console.log('Microphone toggled');
        }

        function initiateCall() {
            alert('Starting secure video call with Dr. Sarah Smith...\n\n🔒 Connection is encrypted\n📹 HD video enabled\n🎤 Audio quality: Excellent\n\nCall will begin in 3 seconds...');
            closeModal();
        }

        // Emergency Functions
        function callEmergency(type) {
            const emergencyNumbers = {
                '911': '911 Emergency Services',
                'poison': 'Poison Control (1-800-222-1222)'
            };
            
            if (confirm(`Are you sure you want to call ${emergencyNumbers[type]}?\n\nThis will initiate an emergency call.`)) {
                alert(`Calling ${emergencyNumbers[type]}...\n\n📞 Connecting now\n📍 Location shared with emergency services\n🏥 Medical information transmitted`);
            }
        }

        function findNearestER() {
            showModal('Nearest Emergency Room', `
                <div class="emergency-map">
                    <div class="hospital-info">
                        <h4>City General Hospital</h4>
                        <div class="hospital-details">
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>123 Medical Center Dr</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-car"></i>
                                <span>0.8 miles (3 min drive)</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-clock"></i>
                                <span>24/7 Emergency Services</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-phone"></i>
                                <span>(555) 123-4567</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="hospital-actions">
                        <button class="btn btn-primary" onclick="getDirections()">
                            <i class="fas fa-directions"></i>
                            Get Directions
                        </button>
                        <button class="btn btn-secondary" onclick="callHospital()">
                            <i class="fas fa-phone"></i>
                            Call Hospital
                        </button>
                    </div>
                    
                    <div class="current-wait-time">
                        <h5>Current Wait Time</h5>
                        <div class="wait-indicator">
                            <div class="wait-time">15-20 minutes</div>
                            <div class="wait-status moderate">Moderate</div>
                        </div>
                    </div>
                </div>
            `);
        }

        function contactDoctor() {
            alert('Contacting Dr. Sarah Johnson...\n\n📞 Calling on-call service\n⏰ Response time: 5-10 minutes\n📋 Your medical information has been shared\n\nPlease stay on the line...');
        }

        function getDirections() {
            alert('Opening navigation to City General Hospital...\n\n🗺️ Route calculated\n⏱️ ETA: 3 minutes\n🚨 Emergency route selected');
            closeModal();
        }

        function callHospital() {
            alert('Calling City General Hospital Emergency Department...\n\n📞 (555) 123-4567\n🏥 Connecting to triage nurse\n📋 Your arrival has been pre-registered');
        }

        // New supporting functions for the pages
        function generateAssessmentHistory() {
            const assessments = [
                { id: 1, type: 'General Health', date: '2025-01-15', score: 88, status: 'Excellent' },
                { id: 2, type: 'Cardiovascular', date: '2025-01-10', score: 85, status: 'Good' },
                { id: 3, type: 'Mental Health', date: '2025-01-05', score: 92, status: 'Excellent' },
                { id: 4, type: 'Nutrition', date: '2024-12-28', score: 78, status: 'Good' },
                { id: 5, type: 'Sleep Quality', date: '2024-12-20', score: 82, status: 'Good' },
                { id: 6, type: 'Physical Fitness', date: '2024-12-15', score: 90, status: 'Excellent' },
                { id: 7, type: 'Stress Level', date: '2024-12-10', score: 75, status: 'Fair' },
                { id: 8, type: 'Blood Pressure', date: '2024-12-05', score: 88, status: 'Good' },
                { id: 9, type: 'Diabetes Risk', date: '2024-11-28', score: 95, status: 'Excellent' },
                { id: 10, type: 'General Health', date: '2024-11-20', score: 83, status: 'Good' },
                { id: 11, type: 'Mental Health', date: '2024-11-15', score: 87, status: 'Good' },
                { id: 12, type: 'Cardiovascular', date: '2024-11-10', score: 81, status: 'Good' }
            ];

            return assessments.map(assessment => `
                <div class="assessment-card" onclick="viewAssessment(${assessment.id})">
                    <div class="assessment-header">
                        <div class="assessment-type">
                            <i class="fas fa-clipboard-check"></i>
                            <h4>${assessment.type}</h4>
                        </div>
                        <div class="assessment-score ${assessment.status.toLowerCase()}">
                            ${assessment.score}%
                        </div>
                    </div>
                    <div class="assessment-details">
                        <div class="assessment-date">
                            <i class="fas fa-calendar"></i>
                            ${new Date(assessment.date).toLocaleDateString('en-US', { 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            })}
                        </div>
                        <div class="assessment-status ${assessment.status.toLowerCase()}">
                            <span class="status-indicator"></span>
                            ${assessment.status}
                        </div>
                    </div>
                    <div class="assessment-actions">
                        <button class="btn-small" onclick="event.stopPropagation(); viewAssessmentDetails(${assessment.id})">
                            <i class="fas fa-eye"></i>
                            View Details
                        </button>
                        <button class="btn-small" onclick="event.stopPropagation(); downloadAssessment(${assessment.id})">
                            <i class="fas fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function generatePersonalInfoTab() {
            return `
                <div class="profile-tab-content">
                    <div class="form-section">
                        <h3>Personal Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>First Name</label>
                                <input type="text" value="John" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Last Name</label>
                                <input type="text" value="Doe" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Date of Birth</label>
                                <input type="date" value="1985-06-15" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Gender</label>
                                <select class="form-control">
                                    <option value="male" selected>Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="tel" value="(555) 123-4567" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Email Address</label>
                                <input type="email" value="john.doe@email.com" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Address Information</h3>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label>Street Address</label>
                                <input type="text" value="123 Main Street" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>City</label>
                                <input type="text" value="Springfield" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>State</label>
                                <input type="text" value="IL" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>ZIP Code</label>
                                <input type="text" value="62701" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveProfile()">
                            <i class="fas fa-save"></i>
                            Save Changes
                        </button>
                        <button class="btn btn-secondary" onclick="resetProfile()">
                            <i class="fas fa-undo"></i>
                            Reset
                        </button>
                    </div>
                </div>
            `;
        }

        // AI Assistant Functions
        function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const message = input.value.trim();
            if (!message) return;

            // Add user message
            addMessageToChat('user', message);
            input.value = '';

            // Simulate AI response
            setTimeout(() => {
                const response = generateAIResponse(message);
                addMessageToChat('ai', response);
            }, 1000);
        }

        function addMessageToChat(sender, message) {
            const chatMessages = document.getElementById('aiChatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            const currentTime = new Date().toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });

            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-${sender === 'user' ? 'user' : 'robot'}"></i>
                </div>
                <div class="message-content">
                    <div class="message-text">${message}</div>
                    <div class="message-time">${currentTime}</div>
                </div>
            `;

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const responses = {
                'symptoms': 'Based on your symptoms, I recommend monitoring your condition. If symptoms persist or worsen, please consult with your healthcare provider. Would you like me to help schedule an appointment?',
                'medications': 'I can help you with medication information. Please remember to take your medications as prescribed. Your current medications include Lisinopril and Metformin. Do you have any specific questions about your medications?',
                'vitals': 'Your recent vitals look good! Your blood pressure has been stable at 120/80, and your heart rate is within normal range. Keep up the great work with your health routine!',
                'emergency': 'If this is a medical emergency, please call 911 immediately. For non-emergency medical concerns, I can help you contact your doctor or find nearby urgent care facilities.',
                'default': 'Thank you for your question. I\'m here to help with your health-related inquiries. Could you please provide more specific details so I can assist you better?'
            };

            const lowerMessage = userMessage.toLowerCase();
            for (const [key, response] of Object.entries(responses)) {
                if (lowerMessage.includes(key)) {
                    return response;
                }
            }
            return responses.default;
        }

        function askQuickQuestion(type) {
            const questions = {
                'symptoms': 'I\'ve been feeling tired lately and have a mild headache. What could this mean?',
                'medications': 'Can you tell me about potential side effects of my current medications?',
                'vitals': 'Can you analyze my recent blood pressure readings?',
                'emergency': 'What should I do if I experience chest pain?'
            };

            const input = document.getElementById('aiChatInput');
            input.value = questions[type];
            sendAIMessage();
        }

        function clearChat() {
            const chatMessages = document.getElementById('aiChatMessages');
            chatMessages.innerHTML = `
                <div class="message ai-message">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-text">
                            Chat cleared! How can I help you today?
                        </div>
                        <div class="message-time">Just now</div>
                    </div>
                </div>
            `;
        }

        function exportChat() {
            alert('Chat history exported successfully!\n\n📄 Format: PDF\n📁 Location: Downloads folder\n📅 Date: ' + new Date().toLocaleDateString());
        }

        function startVoiceInput() {
            alert('🎤 Voice input activated!\n\nSpeak now... (This is a demo feature)\n\nIn a real implementation, this would use Web Speech API.');
        }

        // Assessment Functions
        function startNewAssessment() {
            showModal('Start New Assessment', `
                <div class="assessment-selection">
                    <h4>Choose Assessment Type</h4>
                    <div class="assessment-types">
                        <div class="assessment-type-card" onclick="startAssessmentType('general')">
                            <i class="fas fa-heartbeat"></i>
                            <h5>General Health</h5>
                            <p>Comprehensive health evaluation</p>
                        </div>
                        <div class="assessment-type-card" onclick="startAssessmentType('cardiovascular')">
                            <i class="fas fa-heart"></i>
                            <h5>Cardiovascular</h5>
                            <p>Heart and circulation assessment</p>
                        </div>
                        <div class="assessment-type-card" onclick="startAssessmentType('mental')">
                            <i class="fas fa-brain"></i>
                            <h5>Mental Health</h5>
                            <p>Psychological wellbeing check</p>
                        </div>
                        <div class="assessment-type-card" onclick="startAssessmentType('nutrition')">
                            <i class="fas fa-apple-alt"></i>
                            <h5>Nutrition</h5>
                            <p>Dietary habits evaluation</p>
                        </div>
                    </div>
                </div>
            `);
        }

        function startAssessmentType(type) {
            closeModal();
            alert(`Starting ${type} assessment...\n\n📋 This will take approximately 10-15 minutes\n✅ Your progress will be saved automatically\n📊 Results will be available immediately after completion`);
        }

        function viewAssessment(id) {
            alert(`Viewing Assessment #${id}\n\n📊 Detailed results and recommendations\n📈 Progress tracking\n📋 AI-generated insights\n💡 Personalized action items`);
        }

        function exportAssessments() {
            alert('Exporting assessment data...\n\n📄 Format: PDF Report\n📊 Includes: All 12 assessments\n📈 Charts and trends included\n📁 Saved to Downloads');
        }

        // Profile Functions
        function showProfileTab(tabName) {
            // Remove active class from all menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to clicked item
            event.target.classList.add('active');

            const tabContent = document.getElementById('profileTabContent');
            
            switch(tabName) {
                case 'personal':
                    tabContent.innerHTML = generatePersonalInfoTab();
                    break;
                case 'medical':
                    tabContent.innerHTML = generateMedicalHistoryTab();
                    break;
                case 'insurance':
                    tabContent.innerHTML = generateInsuranceTab();
                    break;
                case 'emergency':
                    tabContent.innerHTML = generateEmergencyContactsTab();
                    break;
                case 'preferences':
                    tabContent.innerHTML = generatePreferencesTab();
                    break;
                case 'security':
                    tabContent.innerHTML = generateSecurityTab();
                    break;
            }
        }

        function generateMedicalHistoryTab() {
            return `
                <div class="profile-tab-content">
                    <div class="medical-history">
                        <h3>Medical History</h3>
                        <div class="medical-sections">
                            <div class="medical-section">
                                <h4>Current Conditions</h4>
                                <div class="condition-list">
                                    <div class="condition-item">
                                        <span class="condition-name">Hypertension</span>
                                        <span class="condition-date">Diagnosed: 2020</span>
                                        <span class="condition-status controlled">Controlled</span>
                                    </div>
                                    <div class="condition-item">
                                        <span class="condition-name">Type 2 Diabetes</span>
                                        <span class="condition-date">Diagnosed: 2018</span>
                                        <span class="condition-status controlled">Well Controlled</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="medical-section">
                                <h4>Allergies</h4>
                                <div class="allergy-list">
                                    <div class="allergy-item">
                                        <span class="allergy-name">Penicillin</span>
                                        <span class="allergy-reaction">Severe: Anaphylaxis</span>
                                    </div>
                                    <div class="allergy-item">
                                        <span class="allergy-name">Shellfish</span>
                                        <span class="allergy-reaction">Moderate: Hives</span>
                                    </div>
                                </div>
                            </div>

                            <div class="medical-section">
                                <h4>Current Medications</h4>
                                <div class="medication-list">
                                    <div class="medication-item">
                                        <span class="med-name">Lisinopril 10mg</span>
                                        <span class="med-schedule">Once daily</span>
                                        <span class="med-prescriber">Dr. Sarah Johnson</span>
                                    </div>
                                    <div class="medication-item">
                                        <span class="med-name">Metformin 500mg</span>
                                        <span class="med-schedule">Twice daily</span>
                                        <span class="med-prescriber">Dr. Sarah Johnson</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateInsuranceTab() {
            return `
                <div class="profile-tab-content">
                    <div class="insurance-info">
                        <h3>Insurance Information</h3>
                        <div class="insurance-card">
                            <div class="card-header">
                                <h4>Primary Insurance</h4>
                                <span class="card-status active">Active</span>
                            </div>
                            <div class="card-details">
                                <div class="detail-row">
                                    <span class="label">Insurance Company:</span>
                                    <span class="value">Blue Cross Blue Shield</span>
                                </div>
                                <div class="detail-row">
                                    <span class="label">Policy Number:</span>
                                    <span class="value">BCBS-123456789</span>
                                </div>
                                <div class="detail-row">
                                    <span class="label">Group Number:</span>
                                    <span class="value">GRP-987654</span>
                                </div>
                                <div class="detail-row">
                                    <span class="label">Effective Date:</span>
                                    <span class="value">January 1, 2025</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateEmergencyContactsTab() {
            return `
                <div class="profile-tab-content">
                    <div class="emergency-contacts">
                        <h3>Emergency Contacts</h3>
                        <div class="contacts-list">
                            <div class="contact-card">
                                <div class="contact-info">
                                    <h4>Jane Doe</h4>
                                    <p>Spouse</p>
                                    <p><i class="fas fa-phone"></i> (555) 123-4567</p>
                                    <p><i class="fas fa-envelope"></i> jane.doe@email.com</p>
                                </div>
                                <div class="contact-actions">
                                    <button class="btn-small">Edit</button>
                                    <button class="btn-small">Call</button>
                                </div>
                            </div>
                            <div class="contact-card">
                                <div class="contact-info">
                                    <h4>Dr. Sarah Johnson</h4>
                                    <p>Primary Care Physician</p>
                                    <p><i class="fas fa-phone"></i> (555) 987-6543</p>
                                    <p><i class="fas fa-hospital"></i> Springfield Medical Center</p>
                                </div>
                                <div class="contact-actions">
                                    <button class="btn-small">Edit</button>
                                    <button class="btn-small">Call</button>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Add New Contact
                        </button>
                    </div>
                </div>
            `;
        }

        function generatePreferencesTab() {
            return `
                <div class="profile-tab-content">
                    <div class="preferences">
                        <h3>Preferences</h3>
                        <div class="preference-sections">
                            <div class="preference-section">
                                <h4>Notifications</h4>
                                <div class="preference-item">
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                    <span>Email notifications</span>
                                </div>
                                <div class="preference-item">
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                    <span>SMS reminders</span>
                                </div>
                                <div class="preference-item">
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                    <span>Push notifications</span>
                                </div>
                            </div>
                            
                            <div class="preference-section">
                                <h4>Privacy</h4>
                                <div class="preference-item">
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                    <span>Share data with healthcare providers</span>
                                </div>
                                <div class="preference-item">
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                    <span>Allow research participation</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateSecurityTab() {
            return `
                <div class="profile-tab-content">
                    <div class="security-settings">
                        <h3>Security Settings</h3>
                        <div class="security-sections">
                            <div class="security-section">
                                <h4>Password</h4>
                                <button class="btn btn-secondary">
                                    <i class="fas fa-key"></i>
                                    Change Password
                                </button>
                            </div>
                            
                            <div class="security-section">
                                <h4>Two-Factor Authentication</h4>
                                <div class="security-item">
                                    <span>SMS Authentication</span>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="security-section">
                                <h4>Login History</h4>
                                <div class="login-history">
                                    <div class="login-item">
                                        <span class="login-date">Today, 2:30 PM</span>
                                        <span class="login-device">Chrome on Windows</span>
                                        <span class="login-location">Springfield, IL</span>
                                    </div>
                                    <div class="login-item">
                                        <span class="login-date">Yesterday, 9:15 AM</span>
                                        <span class="login-device">Mobile App</span>
                                        <span class="login-location">Springfield, IL</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function saveProfile() {
            alert('✅ Profile saved successfully!\n\nAll changes have been updated in your account.');
        }

        function resetProfile() {
            if (confirm('Are you sure you want to reset all changes?')) {
                alert('🔄 Profile reset to original values.');
            }
        }

        // Additional helper functions
        function callDoctor() {
            alert('📞 Calling Dr. Sarah Johnson...\n\n🏥 Springfield Medical Center\n📞 (555) 987-6543\n⏰ Connecting to on-call service');
        }

        function callPharmacy() {
            alert('📞 Calling CVS Pharmacy...\n\n🏪 Main Street Location\n📞 (555) 456-7890\n💊 Prescription services available');
        }

        function callEmergency(type) {
            if (type === '911') {
                alert('🚨 EMERGENCY CALL INITIATED\n\n📞 Calling 911\n📍 Location shared with emergency services\n🆔 Patient ID: PAT-2025-001\n⚕️ Medical conditions: Hypertension, Type 2 Diabetes');
            } else {
                alert('📞 Emergency contact initiated\n\nConnecting to emergency services...');
            }
        }

        function viewAssessmentDetails(id) {
            alert(`📊 Assessment #${id} Details\n\n📈 Comprehensive analysis\n💡 AI recommendations\n📋 Action items\n📄 Full report available`);
        }

        function downloadAssessment(id) {
            alert(`📥 Downloading Assessment #${id}\n\n📄 Format: PDF\n📁 Location: Downloads\n📊 Includes charts and recommendations`);
        }

        function showEventDetails(dateKey, eventTitle) {
            const events = calendarEvents[dateKey];
            const event = events?.find(e => e.title === eventTitle);
            
            if (event) {
                alert(`📅 Event Details\n\n🏷️ ${event.title}\n⏰ ${event.time}\n📍 ${event.location || 'No location specified'}\n📝 Type: ${event.type}`);
            }
        }

        // Reminders Page Functions
        function generateMedicationRemindersContent() {
            return `
                <div class="reminders-section">
                    <div class="section-header">
                        <h3>Medication Reminders</h3>
                        <button class="btn btn-primary" onclick="addNewMedication()">
                            <i class="fas fa-plus"></i>
                            Add Medication
                        </button>
                    </div>
                    
                    <div class="current-medications">
                        <div class="medication-card">
                            <div class="med-info">
                                <div class="med-name">Lisinopril 10mg</div>
                                <div class="med-schedule">8:00 AM Daily</div>
                                <div class="med-adherence">95% adherence this month</div>
                            </div>
                            <div class="med-actions">
                                <button class="btn-small" onclick="editMedication(1)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-small" onclick="deleteMedication(1)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="medication-card">
                            <div class="med-info">
                                <div class="med-name">Metformin 500mg</div>
                                <div class="med-schedule">8:00 AM & 8:00 PM</div>
                                <div class="med-adherence">98% adherence this month</div>
                            </div>
                            <div class="med-actions">
                                <button class="btn-small" onclick="editMedication(2)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-small" onclick="deleteMedication(2)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateHealthGoalsContent() {
            return `
                <div class="reminders-section">
                    <div class="section-header">
                        <h3>Health Goals</h3>
                        <button class="btn btn-primary" onclick="addNewHealthGoal()">
                            <i class="fas fa-plus"></i>
                            Add Goal
                        </button>
                    </div>
                    
                    <div class="goals-grid">
                        <div class="goal-card">
                            <div class="goal-icon">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <div class="goal-info">
                                <h4>Blood Pressure Control</h4>
                                <div class="goal-target">Target: < 120/80 mmHg</div>
                                <div class="goal-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 85%"></div>
                                    </div>
                                    <span>85% achieved</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="goal-card">
                            <div class="goal-icon">
                                <i class="fas fa-weight"></i>
                            </div>
                            <div class="goal-info">
                                <h4>Weight Management</h4>
                                <div class="goal-target">Target: 180 lbs</div>
                                <div class="goal-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 70%"></div>
                                    </div>
                                    <span>70% achieved</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateDietPlansContent() {
            return `
                <div class="reminders-section">
                    <div class="section-header">
                        <h3>Diet Plans</h3>
                        <button class="btn btn-primary" onclick="addNewDietPlan()">
                            <i class="fas fa-plus"></i>
                            Create Plan
                        </button>
                    </div>
                    
                    <div class="diet-plans">
                        <div class="diet-card active">
                            <div class="diet-header">
                                <h4>Mediterranean Diet</h4>
                                <span class="diet-status">Active</span>
                            </div>
                            <div class="diet-details">
                                <p>Low-carb, heart-healthy plan</p>
                                <div class="diet-stats">
                                    <span>📅 Day 15 of 30</span>
                                    <span>🎯 Target: 1800 cal/day</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="diet-card">
                            <div class="diet-header">
                                <h4>DASH Diet</h4>
                                <span class="diet-status">Completed</span>
                            </div>
                            <div class="diet-details">
                                <p>Blood pressure focused nutrition</p>
                                <div class="diet-stats">
                                    <span>✅ Completed successfully</span>
                                    <span>📊 Avg: 1750 cal/day</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateWeightManagementContent() {
            return `
                <div class="reminders-section">
                    <div class="section-header">
                        <h3>Weight Management</h3>
                        <button class="btn btn-primary" onclick="addWeightEntry()">
                            <i class="fas fa-plus"></i>
                            Log Weight
                        </button>
                    </div>
                    
                    <div class="weight-tracking">
                        <div class="weight-summary">
                            <div class="weight-stat">
                                <div class="stat-value">185 lbs</div>
                                <div class="stat-label">Current Weight</div>
                            </div>
                            <div class="weight-stat">
                                <div class="stat-value">180 lbs</div>
                                <div class="stat-label">Goal Weight</div>
                            </div>
                            <div class="weight-stat">
                                <div class="stat-value">-12 lbs</div>
                                <div class="stat-label">Progress</div>
                            </div>
                        </div>
                        
                        <div class="weight-chart">
                            <h4>Weight Progress Chart</h4>
                            <div class="chart-placeholder">
                                📈 Weight tracking chart would display here
                            </div>
                        </div>
                        
                        <div class="recent-entries">
                            <h4>Recent Entries</h4>
                            <div class="weight-entry">
                                <span class="entry-date">Jan 15, 2025</span>
                                <span class="entry-weight">185 lbs</span>
                                <span class="entry-change">-0.5 lbs</span>
                            </div>
                            <div class="weight-entry">
                                <span class="entry-date">Jan 14, 2025</span>
                                <span class="entry-weight">185.5 lbs</span>
                                <span class="entry-change">-0.2 lbs</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function switchReminderTab(tabName) {
            // Remove active from all tabs
            document.querySelectorAll('.reminder-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.reminder-tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Add active to clicked tab
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        // AI Assessment Functions
        function startQuickAssessment(type) {
            const assessmentTypes = {
                'general': 'General Health Assessment',
                'symptoms': 'Symptom Checker',
                'mental': 'Mental Health Assessment',
                'nutrition': 'Nutrition Assessment'
            };

            addMessageToChat('user', `I'd like to start a ${assessmentTypes[type]}`);
            
            setTimeout(() => {
                const response = `Great! I'll help you with a ${assessmentTypes[type]}. Let me ask you a few questions to get started.\n\nQuestion 1: How are you feeling today overall? (1-10 scale)`;
                addMessageToChat('ai', response);
            }, 1000);
        }

        // Reminders Management Functions
        function addNewMedication() {
            showModal('Add New Medication', `
                <div class="medication-form">
                    <div class="form-group">
                        <label>Medication Name</label>
                        <input type="text" id="medName" class="form-control" placeholder="e.g., Lisinopril 10mg">
                    </div>
                    <div class="form-group">
                        <label>Dosage Instructions</label>
                        <input type="text" id="medDosage" class="form-control" placeholder="e.g., 1 tablet daily">
                    </div>
                    <div class="form-group">
                        <label>Reminder Time</label>
                        <input type="time" id="medTime" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Frequency</label>
                        <select id="medFrequency" class="form-control">
                            <option value="daily">Daily</option>
                            <option value="twice-daily">Twice Daily</option>
                            <option value="three-times">Three Times Daily</option>
                            <option value="weekly">Weekly</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveMedication()">
                            <i class="fas fa-save"></i>
                            Save Medication
                        </button>
                        <button class="btn btn-secondary" onclick="closeModal()">
                            Cancel
                        </button>
                    </div>
                </div>
            `);
        }

        function saveMedication() {
            const name = document.getElementById('medName').value;
            const dosage = document.getElementById('medDosage').value;
            const time = document.getElementById('medTime').value;
            const frequency = document.getElementById('medFrequency').value;

            if (!name || !dosage || !time) {
                alert('Please fill in all required fields');
                return;
            }

            closeModal();
            showNotification('✅ Medication reminder added successfully!', 'success');
            showRemindersSection(); // Refresh the page
        }

        function editMedication(id) {
            alert(`Editing medication #${id}\n\nThis would open the edit form with current values.`);
        }

        function deleteMedication(id) {
            if (confirm('Are you sure you want to delete this medication reminder?')) {
                showNotification('✅ Medication reminder deleted!', 'success');
                showRemindersSection(); // Refresh the page
            }
        }

        function addNewHealthGoal() {
            alert('Add New Health Goal\n\nThis would open a form to create a new health goal with targets and timeline.');
        }

        function addNewDietPlan() {
            alert('Create New Diet Plan\n\nThis would open a comprehensive diet planning wizard.');
        }

        function addWeightEntry() {
            showModal('Log Weight Entry', `
                <div class="weight-form">
                    <div class="form-group">
                        <label>Weight (lbs)</label>
                        <input type="number" id="weightValue" class="form-control" placeholder="185">
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="weightDate" class="form-control" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-group">
                        <label>Notes (Optional)</label>
                        <textarea id="weightNotes" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveWeight()">
                            <i class="fas fa-save"></i>
                            Save Entry
                        </button>
                        <button class="btn btn-secondary" onclick="closeModal()">
                            Cancel
                        </button>
                    </div>
                </div>
            `);
        }

        function saveWeight() {
            const weight = document.getElementById('weightValue').value;
            if (!weight) {
                alert('Please enter your weight');
                return;
            }
            closeModal();
            showNotification('✅ Weight entry logged successfully!', 'success');
            showRemindersSection(); // Refresh the page
        }

        function exportAllRecords() {
            alert('📄 Exporting all health records...\n\n📊 Includes: All assessments, trends, recommendations\n📁 Format: Comprehensive PDF report\n💾 Saved to Downloads');
        }

        function generatePrevious12Assessments() {
            const assessments = [
                {
                    id: 1,
                    type: 'General Health',
                    date: 'Jan 15, 2025',
                    score: 88,
                    status: 'Excellent',
                    icon: 'fas fa-heartbeat',
                    color: '#27ae60'
                },
                {
                    id: 2,
                    type: 'Mental Health',
                    date: 'Jan 12, 2025',
                    score: 82,
                    status: 'Good',
                    icon: 'fas fa-brain',
                    color: '#3498db'
                },
                {
                    id: 3,
                    type: 'Cardiovascular',
                    date: 'Jan 8, 2025',
                    score: 90,
                    status: 'Excellent',
                    icon: 'fas fa-heart',
                    color: '#e74c3c'
                },
                {
                    id: 4,
                    type: 'Nutrition',
                    date: 'Jan 5, 2025',
                    score: 75,
                    status: 'Good',
                    icon: 'fas fa-apple-alt',
                    color: '#f39c12'
                },
                {
                    id: 5,
                    type: 'Symptom Check',
                    date: 'Dec 28, 2024',
                    score: 85,
                    status: 'Good',
                    icon: 'fas fa-thermometer-half',
                    color: '#9b59b6'
                },
                {
                    id: 6,
                    type: 'Sleep Quality',
                    date: 'Dec 22, 2024',
                    score: 78,
                    status: 'Fair',
                    icon: 'fas fa-bed',
                    color: '#34495e'
                },
                {
                    id: 7,
                    type: 'Physical Activity',
                    date: 'Dec 18, 2024',
                    score: 92,
                    status: 'Excellent',
                    icon: 'fas fa-running',
                    color: '#16a085'
                },
                {
                    id: 8,
                    type: 'General Health',
                    date: 'Dec 12, 2024',
                    score: 86,
                    status: 'Good',
                    icon: 'fas fa-heartbeat',
                    color: '#27ae60'
                },
                {
                    id: 9,
                    type: 'Stress Level',
                    date: 'Dec 8, 2024',
                    score: 71,
                    status: 'Fair',
                    icon: 'fas fa-brain',
                    color: '#e67e22'
                },
                {
                    id: 10,
                    type: 'Medication Review',
                    date: 'Dec 3, 2024',
                    score: 95,
                    status: 'Excellent',
                    icon: 'fas fa-pills',
                    color: '#2ecc71'
                },
                {
                    id: 11,
                    type: 'Vision Screening',
                    date: 'Nov 28, 2024',
                    score: 89,
                    status: 'Excellent',
                    icon: 'fas fa-eye',
                    color: '#3498db'
                },
                {
                    id: 12,
                    type: 'Diabetes Risk',
                    date: 'Nov 22, 2024',
                    score: 83,
                    status: 'Good',
                    icon: 'fas fa-vial',
                    color: '#e74c3c'
                }
            ];

            return assessments.map(assessment => `
                <div class="assessment-card" onclick="viewAssessmentDetails(${assessment.id})">
                    <div class="assessment-header">
                        <div class="assessment-icon" style="background: ${assessment.color};">
                            <i class="${assessment.icon}"></i>
                        </div>
                        <div class="assessment-info">
                            <h4>${assessment.type} Assessment</h4>
                            <p class="assessment-date">${assessment.date}</p>
                        </div>
                        <div class="assessment-score" style="color: ${assessment.color};">
                            ${assessment.score}%
                        </div>
                    </div>
                    <div class="assessment-body">
                        <div class="status-badge ${assessment.status.toLowerCase()}">
                            ${assessment.status}
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${assessment.score}%; background: ${assessment.color};"></div>
                        </div>
                    </div>
                    <div class="assessment-actions">
                        <button class="btn-small" onclick="event.stopPropagation(); viewAssessmentDetails(${assessment.id})">
                            <i class="fas fa-eye"></i> View Details
                        </button>
                        <button class="btn-small" onclick="event.stopPropagation(); downloadAssessment(${assessment.id})">
                            <i class="fas fa-download"></i> Download
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function exportAllAssessments() {
            alert('📄 Exporting all assessments...\n\n📊 Includes: All 12 previous assessments\n📈 Trends and analytics\n📁 Format: Comprehensive PDF report\n💾 Saved to Downloads');
        }

        function viewAssessmentDetails(id) {
            alert(`🔍 Viewing Assessment #${id}\n\n📋 Detailed results and analysis\n💡 AI recommendations\n📊 Health trends\n🎯 Suggested actions`);
        }

        function downloadAssessment(id) {
            alert(`📥 Downloading Assessment #${id}\n\n📄 Format: PDF Report\n💾 Saved to Downloads folder`);
        }

        // Initialize dashboard on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Dashboard initializing...');
            
            // Initialize calendar
            generateCalendar();
            
            // Start real-time updates
            updateDateTime();
            setInterval(updateDateTime, 1000);
            
            // Initialize notification system
            setTimeout(() => {
                showNotification('👋 Welcome back, John! You have 2 upcoming appointments this week.', 'info');
            }, 2000);
            
            console.log('Dashboard ready!');
        });

        // Enhanced Interactivity Functions
        function simulateRealTimeData() {
            // Simulate real-time health data updates
            setInterval(() => {
                const statValues = document.querySelectorAll('.stat-value');
                statValues.forEach((element, index) => {
                    if (Math.random() > 0.95) { // 5% chance of update
                        element.classList.add('updated');
                        setTimeout(() => {
                            element.classList.remove('updated');
                        }, 800);
                    }
                });
            }, 5000);

            // Simulate notification updates
            setInterval(() => {
                const notificationCount = document.getElementById('topNotificationCount');
                if (notificationCount) {
                    const currentCount = parseInt(notificationCount.textContent);
                    if (Math.random() > 0.98) { // 2% chance of new notification
                        notificationCount.textContent = currentCount + 1;
                        notificationCount.style.animation = 'none';
                        setTimeout(() => {
                            notificationCount.style.animation = 'pulse 0.5s ease-out';
                        }, 10);
                    }
                }
            }, 3000);
        }

        function enhanceCardInteractivity() {
            // Add ripple effect to clickable cards
            const cards = document.querySelectorAll('.stat-card, .mini-widget, .doctor-card, .emergency-card');
            
            cards.forEach(card => {
                card.addEventListener('click', function(e) {
                    const ripple = document.createElement('div');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(59, 130, 246, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple 0.6s ease-out;
                        pointer-events: none;
                        z-index: 1000;
                    `;
                    
                    this.style.position = 'relative';
                    this.style.overflow = 'hidden';
                    this.appendChild(ripple);
                    
                    setTimeout(() => ripple.remove(), 600);
                });
            });
        }

        function addAdvancedAnimations() {
            // Intersection Observer for scroll animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'slideInUp 0.6s ease-out';
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe all cards and widgets
            const animatedElements = document.querySelectorAll('.stat-card, .mini-widget, .health-calendar, .health-summary');
            animatedElements.forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                observer.observe(el);
            });
        }

        // Voice command simulation
        function simulateVoiceCommand() {
            const commands = [
                "Show my next appointment",
                "What medications do I need to take today?",
                "Check my latest vitals",
                "Schedule a telehealth consultation",
                "Find nearest emergency room"
            ];
            
            const randomCommand = commands[Math.floor(Math.random() * commands.length)];
            
            showModal('Voice Command Detected', `
                <div class="voice-command-demo">
                    <div class="voice-animation">
                        <div class="sound-wave">
                            <div class="wave"></div>
                            <div class="wave"></div>
                            <div class="wave"></div>
                            <div class="wave"></div>
                        </div>
                    </div>
                    
                    <div class="command-text">
                        <h5>You said:</h5>
                        <p>"${randomCommand}"</p>
                    </div>
                    
                    <div class="command-processing">
                        <div class="processing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <p>Processing your request...</p>
                    </div>
                </div>
            `);
            
            setTimeout(() => {
                closeModal();
                alert(`Voice command processed!\n\nCommand: "${randomCommand}"\n\n✅ Action completed successfully`);
            }, 3000);
        }

        // Smart notifications
        function showSmartNotification(type, message, action = null) {
            const notification = document.createElement('div');
            notification.className = `smart-notification ${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <div class="notification-icon">
                        ${type === 'success' ? '✅' : type === 'warning' ? '⚠️' : type === 'error' ? '❌' : 'ℹ️'}
                    </div>
                    <div class="notification-message">${message}</div>
                    ${action ? `<button class="notification-action" onclick="${action}">Take Action</button>` : ''}
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">×</button>
                </div>
            `;
            
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: white;
                border: 1px solid #e5e7eb;
                border-radius: 12px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.1);
                z-index: 10000;
                max-width: 400px;
                animation: slideInRight 0.3s ease-out;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideOutRight 0.3s ease-out';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }

        // Initialize enhanced features
        function initializeEnhancedDashboard() {
            simulateRealTimeData();
            enhanceCardInteractivity();
            addAdvancedAnimations();
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case '1':
                            e.preventDefault();
                            loadSection('dashboard');
                            break;
                        case '2':
                            e.preventDefault();
                            loadSection('appointments');
                            break;
                        case '3':
                            e.preventDefault();
                            loadSection('reminders');
                            break;
                        case 'v':
                            e.preventDefault();
                            simulateVoiceCommand();
                            break;
                        case 'e':
                            e.preventDefault();
                            loadSection('emergency');
                            break;
                    }
                }
            });
            
            // Show welcome notification
            setTimeout(() => {
                showSmartNotification('info', 
                    'Welcome back, John! Your next appointment is in 2 days.',
                    'showAppointmentDetails()'
                );
            }, 2000);
        }

        function showAppointmentDetails() {
            alert('📅 Upcoming Appointment\n\n👨‍⚕️ Dr. Sarah Johnson\n🏥 Cardiology Department\n📅 January 19, 2025\n⏰ 10:00 AM\n\n📋 Remember to bring your test results');
        }

        // Update time display
        function updateDateTime() {
            const now = new Date();
            const dateOptions = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const timeOptions = { 
                hour: '2-digit', 
                minute: '2-digit' 
            };
            
            document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', dateOptions);
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-US', timeOptions);
        }

        // 🏥 Supabase Configuration
        const supabaseUrl = 'https://gcggnrwqilylyykppizb.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdjZ2ducndxaWx5bHl5a3BwaXpiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0ODA1NjAsImV4cCI6MjA2NTA1NjU2MH0.9ayDDoyjUiYA3Hmir_A92U2i7QNkIuER-94kDNVVgoE';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // 🔐 Authentication State Management
        let currentUser = null;
        let userProfile = null;

        // Check authentication status
        async function checkAuthentication() {
            try {
                const { data: { session }, error } = await supabase.auth.getSession();
                
                if (error) {
                    console.error('Session error:', error);
                    redirectToAuth();
                    return false;
                }

                if (!session) {
                    console.log('No active session found');
                    redirectToAuth();
                    return false;
                }

                currentUser = session.user;
                console.log('✅ User authenticated:', currentUser.email);
                
                // Load user profile
                await loadUserProfile();
                return true;
            } catch (error) {
                console.error('Authentication check failed:', error);
                redirectToAuth();
                return false;
            }
        }

        // Load user profile from database
        async function loadUserProfile() {
            try {
                const { data: profile, error } = await supabase
                    .from('user_profiles')
                    .select('*')
                    .eq('user_id', currentUser.id)
                    .single();

                if (error && error.code !== 'PGRST116') { // PGRST116 = no rows returned
                    console.error('Profile load error:', error);
                    // Create basic profile if it doesn't exist
                    await createUserProfile();
                    return;
                }

                if (profile) {
                    userProfile = profile;
                    updateUIWithUserData();
                } else {
                    await createUserProfile();
                }
            } catch (error) {
                console.error('Failed to load user profile:', error);
                await createUserProfile();
            }
        }

        // Create user profile
        async function createUserProfile() {
            try {
                const profileData = {
                    user_id: currentUser.id,
                    email: currentUser.email,
                    full_name: currentUser.user_metadata?.full_name || 'User',
                    first_name: currentUser.user_metadata?.full_name?.split(' ')[0] || 'User',
                    last_name: currentUser.user_metadata?.full_name?.split(' ').slice(1).join(' ') || '',
                    phone_number: currentUser.user_metadata?.phone || '',
                    created_at: new Date().toISOString(),
                    updated_at: new Date().toISOString()
                };

                const { data: newProfile, error } = await supabase
                    .from('user_profiles')
                    .insert(profileData)
                    .select()
                    .single();

                if (error) {
                    console.error('Profile creation error:', error);
                    return;
                }

                userProfile = newProfile;
                updateUIWithUserData();
                console.log('✅ User profile created');
            } catch (error) {
                console.error('Failed to create user profile:', error);
            }
        }

        // Update UI with user data
        function updateUIWithUserData() {
            if (userProfile) {
                const userName = userProfile.full_name || userProfile.first_name || 'User';
                const initials = userName.split(' ').map(n => n[0]).join('').toUpperCase();
                
                document.getElementById('userName').textContent = userName;
                document.getElementById('userDisplayName').textContent = userName;
                document.getElementById('userInitials').textContent = initials;
                
                console.log('✅ UI updated with user data');
            }
        }

        // Load real dashboard data from database
        async function loadRealDashboardData() {
            if (!currentUser) return;

            try {
                showLoadingStates();
                
                // Load appointments with full details
                await loadAppointments();
                
                // Load medications/prescriptions
                await loadMedications();
                
                // Load health assessments
                await loadHealthAssessments();
                
                // Load vital signs
                await loadVitalSigns();
                
                // Load reminders
                await loadReminders();
                
                // Load AI chat history
                await loadRecentAIChats();
                
                console.log('✅ All dashboard data loaded successfully');
                hideLoadingStates();
                
            } catch (error) {
                console.error('❌ Error loading dashboard data:', error);
                hideLoadingStates();
                showNotification('error', 'Failed to load some dashboard data. Please refresh the page.');
            }
        }

        // Load appointments with detailed information
        async function loadAppointments() {
            try {
                const { data: appointments, error } = await supabase
                    .from('appointments')
                    .select(`
                        *,
                        healthcare_providers(name, specialty, hospital_name)
                    `)
                    .eq('user_id', currentUser.id)
                    .gte('scheduled_date', new Date().toISOString())
                    .order('scheduled_date', { ascending: true })
                    .limit(5);

                if (error) throw error;

                // Update appointment count
                document.getElementById('appointmentCount').textContent = appointments?.length || 0;
                
                // Update upcoming appointments section
                updateUpcomingAppointments(appointments || []);
                
                console.log('✅ Appointments loaded:', appointments?.length || 0);
            } catch (error) {
                console.error('Error loading appointments:', error);
                document.getElementById('appointmentCount').textContent = '0';
            }
        }

        // Load medications and prescriptions
        async function loadMedications() {
            try {
                const { data: medications, error } = await supabase
                    .from('prescriptions')
                    .select('*')
                    .eq('user_id', currentUser.id)
                    .eq('status', 'active')
                    .order('created_at', { ascending: false });

                if (error) throw error;

                // Update medication count
                document.getElementById('medicationCount').textContent = medications?.length || 0;
                
                // Update medications list
                updateMedicationsList(medications || []);
                
                console.log('✅ Medications loaded:', medications?.length || 0);
            } catch (error) {
                console.error('Error loading medications:', error);
                document.getElementById('medicationCount').textContent = '0';
            }
        }

        // Load health assessments
        async function loadHealthAssessments() {
            try {
                const { data: assessments, error } = await supabase
                    .from('assessment_responses')
                    .select(`
                        *,
                        ai_results(analysis_result, recommendations)
                    `)
                    .eq('user_id', currentUser.id)
                    .order('created_at', { ascending: false })
                    .limit(5);

                if (error) throw error;

                // Update assessments count
                const assessmentCount = assessments?.length || 0;
                document.getElementById('assessmentCount').textContent = assessmentCount;
                
                // Update recent assessments
                updateRecentAssessments(assessments || []);
                
                console.log('✅ Health assessments loaded:', assessmentCount);
            } catch (error) {
                console.error('Error loading health assessments:', error);
                document.getElementById('assessmentCount').textContent = '0';
            }
        }

        // Load vital signs and health metrics
        async function loadVitalSigns() {
            try {
                const { data: vitals, error } = await supabase
                    .from('vital_signs')
                    .select('*')
                    .eq('user_id', currentUser.id)
                    .order('created_at', { ascending: false })
                    .limit(10);

                if (error) throw error;

                if (vitals && vitals.length > 0) {
                    const latest = vitals[0];
                    
                    // Update vital signs displays
                    if (latest.heart_rate) {
                        document.getElementById('avgHeartRate').textContent = latest.heart_rate;
                    }
                    if (latest.blood_pressure_systolic && latest.blood_pressure_diastolic) {
                        document.getElementById('avgBloodPressure').textContent = 
                            `${latest.blood_pressure_systolic}/${latest.blood_pressure_diastolic}`;
                    }
                    if (latest.weight) {
                        document.getElementById('currentWeight').textContent = `${latest.weight} kg`;
                    }
                    if (latest.temperature) {
                        document.getElementById('bodyTemperature').textContent = `${latest.temperature}°C`;
                    }
                    
                    // Calculate trends if we have multiple readings
                    if (vitals.length > 1) {
                        updateVitalTrends(vitals);
                    }
                }
                
                console.log('✅ Vital signs loaded:', vitals?.length || 0);
            } catch (error) {
                console.error('Error loading vital signs:', error);
            }
        }

        // Load reminders
        async function loadReminders() {
            try {
                const { data: reminders, error } = await supabase
                    .from('reminders')
                    .select('*')
                    .eq('user_id', currentUser.id)
                    .eq('status', 'active')
                    .gte('reminder_time', new Date().toISOString())
                    .order('reminder_time', { ascending: true })
                    .limit(5);

                if (error) throw error;

                // Update reminders count
                const reminderCount = reminders?.length || 0;
                if (document.getElementById('reminderCount')) {
                    document.getElementById('reminderCount').textContent = reminderCount;
                }
                
                // Update upcoming reminders
                updateUpcomingReminders(reminders || []);
                
                console.log('✅ Reminders loaded:', reminderCount);
            } catch (error) {
                console.error('Error loading reminders:', error);
            }
        }

        // Load recent AI chat conversations
        async function loadRecentAIChats() {
            try {
                const { data: chats, error } = await supabase
                    .from('ai_chat_conversations')
                    .select('*')
                    .eq('user_id', currentUser.id)
                    .order('created_at', { ascending: false })
                    .limit(3);

                if (error) throw error;

                // Update AI chat history
                updateAIChatHistory(chats || []);
                
                console.log('✅ AI chat history loaded:', chats?.length || 0);
            } catch (error) {
                console.error('Error loading AI chat history:', error);
            }
        }

        // Update upcoming appointments in the UI
        function updateUpcomingAppointments(appointments) {
            const container = document.getElementById('appointmentsContainer');
            if (!container) return;

            if (appointments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-calendar-plus"></i>
                        <p>No upcoming appointments</p>
                        <button class="btn-primary" onclick="window.location.href='appointments.html'">
                            Book Appointment
                        </button>
                    </div>`;
                return;
            }

            container.innerHTML = appointments.map(appointment => {
                const date = new Date(appointment.scheduled_date);
                const isToday = date.toDateString() === new Date().toDateString();
                const timeStr = date.toLocaleTimeString('en-US', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true 
                });
                const dateStr = date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric' 
                });

                return `
                    <div class="appointment-card ${isToday ? 'today' : ''}">
                        <div class="appointment-type ${appointment.appointment_type}">
                            <i class="fas ${getAppointmentIcon(appointment.appointment_type)}"></i>
                        </div>
                        <div class="appointment-details">
                            <h4>${appointment.appointment_type?.charAt(0).toUpperCase() + appointment.appointment_type?.slice(1) || 'Appointment'}</h4>
                            <p><strong>${appointment.healthcare_providers?.name || 'Healthcare Provider'}</strong></p>
                            <p>${appointment.healthcare_providers?.specialty || ''}</p>
                            <div class="appointment-time">
                                <i class="fas fa-calendar"></i>
                                <span>${dateStr} at ${timeStr}</span>
                            </div>
                            <div class="appointment-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${appointment.healthcare_providers?.hospital_name || appointment.location || 'Location TBD'}</span>
                            </div>
                        </div>
                        <div class="appointment-actions">
                            <button class="action-btn" onclick="viewAppointment('${appointment.id}')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn edit" onclick="editAppointment('${appointment.id}')">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>`;
            }).join('');
        }

        // Update medications list in the UI
        function updateMedicationsList(medications) {
            const container = document.getElementById('medicationsContainer');
            if (!container) return;

            if (medications.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-pills"></i>
                        <p>No active medications</p>
                        <button class="btn-primary" onclick="window.location.href='reminders.html'">
                            Add Medication
                        </button>
                    </div>`;
                return;
            }

            container.innerHTML = medications.map(med => `
                <div class="medication-card">
                    <div class="med-icon">
                        <i class="fas fa-pills"></i>
                    </div>
                    <div class="med-details">
                        <h4>${med.medication_name}</h4>
                        <p>${med.dosage} - ${med.frequency}</p>
                        <div class="med-schedule">
                            <i class="fas fa-clock"></i>
                            <span>Next dose: ${getNextDoseTime(med)}</span>
                        </div>
                    </div>
                    <div class="med-actions">
                        <button class="action-btn" onclick="markAsTaken('${med.id}')">
                            <i class="fas fa-check"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Update recent assessments
        function updateRecentAssessments(assessments) {
            const container = document.getElementById('assessmentsContainer');
            if (!container) return;

            if (assessments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-chart-line"></i>
                        <p>No health assessments yet</p>
                        <button class="btn-primary" onclick="window.location.href='ai-features.html'">
                            Start Assessment
                        </button>
                    </div>`;
                return;
            }

            container.innerHTML = assessments.map(assessment => {
                const date = new Date(assessment.created_at);
                const result = assessment.ai_results?.[0];
                
                return `
                    <div class="assessment-card">
                        <div class="assessment-type">
                            <i class="fas ${getAssessmentIcon(assessment.feature_id)}"></i>
                        </div>
                        <div class="assessment-details">
                            <h4>${getAssessmentTitle(assessment.feature_id)}</h4>
                            <p>Completed ${date.toLocaleDateString()}</p>
                            ${result ? `
                                <div class="assessment-score">
                                    <span>Risk Level: ${getRiskLevel(result.analysis_result)}</span>
                                </div>
                            ` : ''}
                        </div>
                        <div class="assessment-actions">
                            <button class="action-btn" onclick="viewAssessment('${assessment.id}')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>`;
            }).join('');
        }

        // Update AI chat history
        function updateAIChatHistory(chats) {
            const container = document.getElementById('aiChatContainer');
            if (!container) return;

            if (chats.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-robot"></i>
                        <p>No recent AI conversations</p>
                        <button class="btn-primary" onclick="window.location.href='ai-health-assistant.html'">
                            Start AI Chat
                        </button>
                    </div>`;
                return;
            }

            container.innerHTML = chats.map(chat => {
                const date = new Date(chat.created_at);
                const preview = chat.user_message?.substring(0, 50) + '...';
                
                return `
                    <div class="chat-card">
                        <div class="chat-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="chat-details">
                            <h4>AI Health Assistant</h4>
                            <p>${preview}</p>
                            <div class="chat-time">
                                <i class="fas fa-clock"></i>
                                <span>${date.toLocaleDateString()} ${date.toLocaleTimeString()}</span>
                            </div>
                        </div>
                        <div class="chat-actions">
                            <button class="action-btn" onclick="continueChat('${chat.session_id}')">
                                <i class="fas fa-comment"></i>
                            </button>
                        </div>
                    </div>`;
            }).join('');
        }

        // Show loading states
        function showLoadingStates() {
            const loadingElements = [
                'appointmentCount', 'medicationCount', 'assessmentCount',
                'avgHeartRate', 'avgBloodPressure', 'currentWeight'
            ];
            
            loadingElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                }
            });
        }

        // Hide loading states
        function hideLoadingStates() {
            // Loading states will be replaced by actual data
            console.log('✅ Loading states hidden');
        }

        // Helper functions
        function getAppointmentIcon(type) {
            const icons = {
                'medical': 'fa-stethoscope',
                'dental': 'fa-tooth',
                'checkup': 'fa-heartbeat',
                'consultation': 'fa-user-md',
                'surgery': 'fa-procedures'
            };
            return icons[type] || 'fa-calendar';
        }

        function getAssessmentIcon(featureId) {
            const icons = {
                'symptom-checker': 'fa-diagnoses',
                'health-assessment': 'fa-heartbeat',
                'mental-health': 'fa-brain',
                'nutrition': 'fa-apple-alt'
            };
            return icons[featureId] || 'fa-chart-line';
        }

        function getAssessmentTitle(featureId) {
            const titles = {
                'symptom-checker': 'Symptom Analysis',
                'health-assessment': 'Health Assessment',
                'mental-health': 'Mental Health Check',
                'nutrition': 'Nutrition Analysis'
            };
            return titles[featureId] || 'Health Assessment';
        }

        function getRiskLevel(analysisResult) {
            if (!analysisResult) return 'Unknown';
            const result = JSON.parse(analysisResult);
            return result.riskLevel || result.urgency || 'Low';
        }

        function getNextDoseTime(medication) {
            // Calculate next dose time based on frequency
            const now = new Date();
            const frequency = medication.frequency?.toLowerCase();
            
            if (frequency?.includes('daily')) {
                const tomorrow = new Date(now);
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(9, 0, 0, 0); // 9 AM default
                return tomorrow.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            }
            
            return 'Next dose in 6 hours';
        }

        // Action handlers
        function viewAppointment(appointmentId) {
            // Navigate to appointment details
            window.location.href = `appointments.html?id=${appointmentId}`;
        }

        function editAppointment(appointmentId) {
            // Navigate to appointment edit
            window.location.href = `appointments.html?edit=${appointmentId}`;
        }

        function viewAssessment(assessmentId) {
            // Navigate to assessment results
            window.location.href = `ai-features.html?result=${assessmentId}`;
        }

        function continueChat(sessionId) {
            // Navigate to AI chat with session
            window.location.href = `ai-health-assistant.html?session=${sessionId}`;
        }

        function markAsTaken(medicationId) {
            // Mark medication as taken
            showNotification('success', 'Medication marked as taken');
            // TODO: Update database
        }

        // Real-time updates
        function setupRealTimeUpdates() {
            // Subscribe to database changes
            const subscription = supabase
                .channel('dashboard-updates')
                .on('postgres_changes', {
                    event: '*',
                    schema: 'public',
                    table: 'appointments',
                    filter: `user_id=eq.${currentUser.id}`
                }, () => {
                    loadAppointments();
                })
                .on('postgres_changes', {
                    event: '*',
                    schema: 'public',
                    table: 'prescriptions',
                    filter: `user_id=eq.${currentUser.id}`
                }, () => {
                    loadMedications();
                })
                .subscribe();

            console.log('✅ Real-time updates enabled');
            
            // Cleanup on page unload
            window.addEventListener('beforeunload', () => {
                subscription.unsubscribe();
            });
        }

        // Sign out function
        async function signOut() {
            try {
                const { error } = await supabase.auth.signOut();
                if (error) {
                    console.error('Sign out error:', error);
                    return;
                }
                
                console.log('✅ User signed out');
                redirectToAuth();
            } catch (error) {
                console.error('Sign out failed:', error);
            }
        }

        // Redirect to authentication page
        function redirectToAuth() {
            window.location.href = '/html/auth.html';
        }

        // Handle URL hash tokens from authentication redirects
        function handleAuthTokens() {
            const hash = window.location.hash;
            
            if (hash && hash.includes('access_token')) {
                console.log('🔐 Processing authentication tokens from URL');
                
                // Clear the hash from URL for security
                setTimeout(() => {
                    window.history.replaceState(null, null, window.location.pathname);
                }, 1000);
                
                // Show success message
                const successMessage = document.createElement('div');
                successMessage.innerHTML = `
                    <div style="position: fixed; top: 20px; right: 20px; background: #10b981; color: white; 
                         padding: 15px 20px; border-radius: 8px; font-weight: 500; z-index: 10000; 
                         box-shadow: 0 4px 12px rgba(0,0,0,0.15); animation: slideInRight 0.3s ease-out;">
                        ✅ Welcome to MediCare+! You're successfully signed in.
                    </div>
                `;
                document.body.appendChild(successMessage);
                
                setTimeout(() => {
                    successMessage.style.animation = 'slideOutRight 0.3s ease-out';
                    setTimeout(() => successMessage.remove(), 300);
                }, 4000);
                
                return true; // Tokens processed
            }
            
            return false; // No tokens to process
        }

        // Load initial data
        document.addEventListener('DOMContentLoaded', async function() {
            // Handle authentication tokens from redirect first
            const hasTokens = handleAuthTokens();
            
            // Check authentication first
            const isAuthenticated = await checkAuthentication();
            
            if (!isAuthenticated) {
                return; // Will redirect to auth page
            }

            // Load dashboard data
            await loadRealDashboardData();
            loadDashboardData(); // Keep existing mock data for demo
            initializeCalendar();
            initializeCharts(); // Initialize charts and analytics
            addVoiceSearchCapability();
            updateDateTime();
            
            // Initialize enhanced features
            initializeEnhancedDashboard();
            
            // Update time every minute
            setInterval(updateDateTime, 60000);
            
            // Show smart alerts after 5 seconds
            setTimeout(() => {
                toggleSmartAlerts();
            }, 5000);
            
            // Add helpful tooltip for voice commands
            const helpTooltip = document.createElement('div');
            helpTooltip.innerHTML = `
                <div style="position: fixed; bottom: 20px; left: 20px; background: rgba(0,0,0,0.8); color: white; padding: 8px 12px; border-radius: 6px; font-size: 12px; z-index: 10000; animation: fadeIn 0.3s ease-out;">
                    🎤 Press Ctrl+V for voice commands | 🚨 Ctrl+E for emergency
                </div>
            `;
            document.body.appendChild(helpTooltip);
            
            setTimeout(() => {
                helpTooltip.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => helpTooltip.remove(), 300);
            }, 7000);
        });

        function loadDashboardData() {
            // Simulate loading dashboard data
            console.log('Loading dashboard data...');
            
            // Update user info (this would typically come from your API)
            document.getElementById('userName').textContent = 'John Doe';
            document.getElementById('userDisplayName').textContent = 'John Doe';
            document.getElementById('userInitials').textContent = 'JD';
            
            // Update stats
            updateHealthScore(85);
            updateStats();
        }

        function updateHealthScore(score) {
            document.getElementById('healthScore').textContent = score;
            
            // Update score circle progress
            const percentage = (score / 100) * 360;
            const scoreCircle = document.querySelector('.score-circle');
            scoreCircle.style.background = `conic-gradient(white 0deg ${percentage}deg, transparent ${percentage}deg)`;
        }

        function updateStats() {
            // This would typically fetch real data from your backend
            document.getElementById('appointmentCount').textContent = '3';
            document.getElementById('medicationCount').textContent = '5';
            document.getElementById('vitalTrend').textContent = 'Normal';
            document.getElementById('reportCount').textContent = '12';
            
            // Update metric summaries
            document.getElementById('avgHeartRate').textContent = '72';
            document.getElementById('avgBloodPressure').textContent = '120/80';
            document.getElementById('currentWeight').textContent = '165';
            document.getElementById('sleepHours').textContent = '7.5';
        }

        // Timeframe change handler
        document.getElementById('metricsTimeframe').addEventListener('change', function() {
            const timeframe = this.value;
            console.log(`Changing metrics timeframe to: ${timeframe}`);
            // Implement timeframe change logic
            updateMetricsChart(timeframe);
        });

        function updateMetricsChart(timeframe) {
            // Update chart based on selected timeframe
            console.log(`Updating chart for timeframe: ${timeframe}`);
            // Implement chart update logic
        }

        // Additional missing helper functions for dynamic dashboard
        function updateUpcomingReminders(reminders) {
            // Update upcoming reminders in UI
            console.log('Updating reminders:', reminders.length);
        }

        function updateVitalTrends(vitals) {
            // Calculate and display vital sign trends
            if (vitals.length < 2) return;
            
            const latest = vitals[0];
            const previous = vitals[1];
            
            // Calculate heart rate trend
            if (latest.heart_rate && previous.heart_rate) {
                const trend = latest.heart_rate - previous.heart_rate;
                console.log(`Heart rate trend: ${trend > 0 ? '+' : ''}${trend} bpm`);
            }
        }

        // Show notification helper
        function showNotification(type, message) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
                <span>${message}</span>
            `;
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                padding: 12px 16px;
                border-radius: 8px;
                font-weight: 500;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideInRight 0.3s ease-out;
                display: flex;
                align-items: center;
                gap: 8px;
                max-width: 400px;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        // Add CSS animations for notifications
        const styleSheet = document.createElement('style');
        styleSheet.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(styleSheet);

        // Initialize real-time updates when authenticated
        async function initializeEnhancedDashboard() {
            if (currentUser) {
                setupRealTimeUpdates();
                console.log('✅ Enhanced dashboard initialized with real-time updates');
            }
        }
    </script>

    <!-- Dashboard Chat Widget -->
    <script src="../js/dashboard-chat-widget.js"></script>
</body>
</html> 

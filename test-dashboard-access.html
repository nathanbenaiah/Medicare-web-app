<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Access Test - Medicare+</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #f8fafc;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }
        .test-link {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.2s;
        }
        .test-link:hover {
            background: #2563eb;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background: #dcfce7; color: #166534; }
        .error { background: #fef2f2; color: #dc2626; }
        .warning { background: #fef3c7; color: #92400e; }
        .info { background: #dbeafe; color: #1e40af; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• Medicare+ Dashboard Access Test</h1>
            <p>This page tests access to both patient and provider dashboards</p>
        </div>

        <div class="test-section">
            <h3>üì± Dashboard Links</h3>
            <div>
                <a href="/html/user-dashboard.html" class="test-link" target="_blank">
                    üë§ Patient Dashboard
                </a>
                <a href="/html/provider-dashboard.html" class="test-link" target="_blank">
                    üë®‚Äç‚öïÔ∏è Provider Dashboard
                </a>
                <a href="/test-dashboards.html" class="test-link" target="_blank">
                    üè† Portal Page
                </a>
            </div>
        </div>

        <div class="test-section">
            <h3>üîç Diagnostic Information</h3>
            <div id="diagnostics">
                <div class="status info">
                    <strong>Testing dashboard accessibility...</strong>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>üîß Manual Tests</h3>
            <p>Click the buttons below to test specific components:</p>
            <button onclick="testSupabaseConnection()" class="test-link">Test Supabase Connection</button>
            <button onclick="testReactLoading()" class="test-link">Test React Loading</button>
            <button onclick="testCSSLoading()" class="test-link">Test CSS Loading</button>
        </div>

        <div class="test-section">
            <h3>üìã Troubleshooting Steps</h3>
            <ol>
                <li><strong>Server Status:</strong> Make sure the server is running on port 3000</li>
                <li><strong>File Paths:</strong> Verify dashboard files exist in /html/ directory</li>
                <li><strong>Browser Console:</strong> Check for JavaScript errors (F12 ‚Üí Console)</li>
                <li><strong>Network Tab:</strong> Check for failed resource loading (F12 ‚Üí Network)</li>
                <li><strong>Supabase:</strong> Verify database schema is properly set up</li>
            </ol>
        </div>
    </div>

    <script>
        // Test Supabase connection
        async function testSupabaseConnection() {
            const diagnostics = document.getElementById('diagnostics');
            diagnostics.innerHTML = '<div class="status info">Testing Supabase connection...</div>';
            
            try {
                // Test if Supabase is loaded
                if (typeof window.supabase === 'undefined') {
                    throw new Error('Supabase library not loaded');
                }
                
                const supabaseUrl = 'https://gcggnrwqilylyykppizb.supabase.co';
                const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdj Z25yd3FpbHlseXlrcHBpemIiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTcxMjI0MjUzOCwiZXhwIjoyMDI3ODE4NTM4fQ.GtHQVOl7NSmNWE6u6wqYSN8EZwrBw4yyJ5fK4Lr0n2k';
                
                const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
                
                // Test a simple query
                const { data, error } = await supabase.from('user_profiles').select('count').limit(1);
                
                if (error) {
                    throw error;
                }
                
                diagnostics.innerHTML = '<div class="status success">‚úÖ Supabase connection successful!</div>';
            } catch (error) {
                diagnostics.innerHTML = `<div class="status error">‚ùå Supabase connection failed: ${error.message}</div>`;
            }
        }
        
        // Test React loading
        function testReactLoading() {
            const diagnostics = document.getElementById('diagnostics');
            
            if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined') {
                diagnostics.innerHTML = '<div class="status success">‚úÖ React and ReactDOM loaded successfully!</div>';
            } else {
                diagnostics.innerHTML = '<div class="status error">‚ùå React libraries not loaded properly</div>';
            }
        }
        
        // Test CSS loading
        function testCSSLoading() {
            const diagnostics = document.getElementById('diagnostics');
            
            // Test if stylesheets are loaded
            const stylesheets = document.querySelectorAll('link[rel="stylesheet"]');
            const loadedCount = stylesheets.length;
            
            diagnostics.innerHTML = `<div class="status info">üìÑ ${loadedCount} stylesheets found in document</div>`;
        }
        
        // Auto-run basic diagnostics
        window.addEventListener('load', () => {
            setTimeout(() => {
                const diagnostics = document.getElementById('diagnostics');
                const serverTime = new Date().toLocaleString();
                
                diagnostics.innerHTML = `
                    <div class="status success">‚úÖ Test page loaded at ${serverTime}</div>
                    <div class="status info">üåê Server appears to be running correctly</div>
                    <div class="status warning">‚ö†Ô∏è Click dashboard links above to test access</div>
                `;
            }, 1000);
        });
    </script>
    
    <!-- Load Supabase for testing -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</body>
</html> 